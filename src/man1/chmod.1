.\" Copyright Andries Brouwer, Ragnar Hojland Espinosa and A. Wik, 1998.
.\"
.\" This file may be copied under the conditions described
.\" in the LDP GENERAL PUBLIC LICENSE, Version 1, September 1998
.\" that should have been distributed together with this file.
.\" 
.\" Дата последней коррекции перевода 30.11.2003
.\" Перевод с английского сделал Виктор Вислобоков <corochoone@perm.ru>
.\" http://www.linuxshare.ru/projects/trans/mans.html
.\" Вычитано и скорректировано by alexm@hsys.msk.ru для проекта
.\" http://alexm.here.ru/manpages-ru/ 
.TH CHGRP 1 2000-08 "GNU fileutils 4.0"
.SH ИМЯ
chmod \- изменяет права доступа к файлу
.SH ОБЗОР
.BI "chmod [" опции "] " "режим файл..."
.sp
Опции POSIX:
.B "[\-R] [\-\-]"
.sp
Метод задания прав доступа в стиле GNU:
.BI [\-\-reference= rfile ]
.sp
Опции GNU (краткая форма):
.B [\-cfvR]
.B "[\-\-help] [\-\-version] [\-\-]"
.SH ОПИСАНИЕ
.B chmod
изменяет права доступа каждого указанного
.I файла
в соответствии с правами доступа, указанными в параметре
.IR режим ,
который может быть представлен как в символьном виде, так и в виде
восьмеричного числа, представляющего битовую маску новых прав доступа.
.PP
Формат символьного режима таков:
.br
\&`[ugoa...][[+\-=][rwxXstugo...]...][,...]'.
.PP
Каждый аргумент -- это список символьных команд изменения прав
доступа, разделенных запятыми.  Каждая такая команда начинается с нуля
или более букв `ugoa', комбинация которых указывает, чьи права доступа
к файлу будут изменены: пользователя, владеющего файлом (u); других
пользователей в данной группе (g); других пользователей, не входящих в
данную группу (o) или же всех пользователей (a). Буква `a'
эквивалентна `ugo'.  Если не задана ни одна буква, то автоматически
будет использоваться буква `a', но биты, установленные в
.IR umask ,
не будут затронуты.
.PP
Оператор `+' добавляет выбранные права доступа к уже имеющимся у
каждого файла; `\-' удаляет эти права; а `=' присваивает только эти
права каждому указанному файлу.
.PP
Буквы `rwxXstugo' выбирают новые права доступа для пользователя,
заданного одной из букв `ugoa': чтение (r); запись (w); выполнение
(или доступ к каталогу) (x); выполнение, если файл является каталогом
или уже имеет право на выполнение для какого-нибудь пользователя (X);
setuid- или setgid-биты (s);
sticky-бит (t); установка для остальных таких же прав
доступа, которые имеет пользователь, владеющий этим файлом (u);
установка для остальных таких же прав доступа, которые имеет
группа файла (g); установка для остальных таких же прав
доступа, которые имеют остальные пользователи (не входящие в группу
файла) (o).  (Так, `chmod g\-s file' снимает бит
set-group-ID (sgid), \&`chmod ug+s file' устанавливает биты suid и
sgid, в то время как \&`chmod o+s file' ничего не делает).
.PP
`sticky-бит' не описывается в POSIX.  Такое специфическое название он
получил из-за первоначальной функции, которую он выполнял: сохранял
исполняемый код программы на устройстве подкачки.  В настоящее время
установка sticky-бита для каталога, приводит к тому, что только
владелец файла и владелец этого каталога могут удалять этот файл из
каталога.  (Обычно это используется в каталогах типа /tmp, куда все
имеют права на запись).
.PP
Числовой режим состоит из не более четырех восьмеричных цифр (от нуля
до семи), которые складываются из битовых масок 4, 2 и 1.  Любые
пропущенные разряды дополняются лидирующими нулями.  Первая цифра
выбирает установку идентификатора пользователя (setuid) (4) или
идентификатора группы (setgid) (2) или sticky-бита (1).  Вторая цифра
выбирает права доступа для пользователя, владеющего данным файлом:
чтение(4), запись (2) и выполнение (1); третья цифра выбирает права
доступа для пользователей, входящих в данную группу, с тем же смыслом,
что и у второй цифры; и четвертый разряд выбирает права доступа для
остальных пользователей (не входящих в данную группу), опять с тем же
смыслом.
.PP
.B chmod
никогда не изменяет права на символьные ссылки, так как этого не умеет 
делать системный вызов
.BR chmod .
Это не является проблемой, так как
права символьных ссылок никогда не используются. Однако, для
каждой символьной ссылки, заданной в командной строке,
.B chmod
изменяет права доступа связанного с ней файла. При этом
.B chmod
игнорирует символьные ссылки, встречающиеся во время рекурсивной
обработки каталогов.
.SH "ОПЦИИ POSIX"
.TP
.B "\-R"
Рекурсивное изменение прав доступа для каталогов и их содержимого.
.SH "ДОПОЛНИТЕЛЬНОЕ ОПИСАНИЕ GNU-ВЕРСИИ"
Расширение GNU (новое в fileutils 4.0) позволяет использовать опцию
.BI "\-\-reference=" "rfile"
для задания точно таких же прав доступа, как и у файла
.IR rfile .
.TP
.B "\-\-"
Завершает список опций.
.SH "ОПЦИИ GNU"
.TP
.B "\-c, \-\-changes"
Подробно описывать действия для каждого
.IR файла ,
чьи права действительно изменяются.
.TP
.B "\-f, \-\-silent, \-\-quiet"
Не выдавать сообщения об ошибке для файлов, чьи права не могут быть изменены.
.TP
.B "\-v, \-\-verbose"
Подробно описывать действие или отсутствие действия для каждого
.IR файла .
.TP
.B "\-R, \-\-recursive"
Рекурсивное изменение прав доступа для каталогов и их содержимого.
.SH "СТАНДАРТНЫЕ ОПЦИИ GNU"
.TP
.B "\-\-help"
Выдать подсказку на стандартный вывод и успешно завершиться.
.TP
.B "\-\-version"
Выдать информацию о версии на стандартный вывод и успешно завершиться.
.TP
.B "\-\-"
Служит для обозначения конца списка опций.
.SH ОКРУЖЕНИЕ
При работе обычным образом используются переменные LANG, LC_ALL,
LC_CTYPE и LC_MESSAGES.  В системах, соответствующих стандарту XSI,
обычным образом используется NLSPATH.
.SH "СОВМЕСТИМОСТЬ СО СТАНДАРТАМИ"
POSIX 1003.2 требует только опцию \-R. Использование других опций
может оказаться непереносимым решением.  Стандарт POSIX не описывает бит `t'.
Этот стандарт не говорит о том, должна ли \fBchmod\fP соблюдать
корректность прав доступа к файлу, очищая или отказываясь
устанавливать биты suid и sgid, когда биты, дающие права на
выполнение, сброшены, а также о том, должна ли вообще \fBchmod\fP
обращать внимание на бит `s'.
.SH "НЕСТАНДАРТНЫЕ ПРАВА ДОСТУПА"
Выше было описано применение бита `t' для каталогов.  Различные
системы придают специальное значение комбинациям битов прав доступа,
обычно не имеющим смысла.  Так, например, в Linux, которая берет
пример с System V (см. System V Interface Definition (SVID) Version
3), если на файле установлен бит setgid, но не установлен бит
выполнения группой, то блокировки этого файла становятся
mandatory (жесткими), в отличие от обычных advisory (информационных).
Подробности описаны в файле
.IR /usr/src/linux/Documentation/mandatory.txt .
.SH ЗАМЕЧАНИЯ
Данная страница описывает команду
.BR chmod ,
которая находится в пакете fileutils-4.0; другие версии могут иметь
небольшие отличия.  Добавления и исправления отправляйте по адресу
aeb@cwi.nl.  Сообщения об ошибках в программах отправляйте по адресу
fileutils-bugs@gnu.ai.mit.edu.
.SH "СМОТРИ ТАКЖЕ"
.BR chattr (1),
.BR chown (1),
.BR install (1),
.BR chmod (2),
.BR stat (2),
.BR umask (2)
.SH ПЕРЕВОД
Перевёл с английского Виктор Вислобоков <corochoone@perm.ru> 2003

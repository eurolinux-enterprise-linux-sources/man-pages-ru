.\" -*- nroff -*-
.\" Copyright Andries Brouwer, Ragnar Hojland Espinosa and A. Wik, 1998.
.\"
.\" This file may be copied under the conditions described
.\" in the LDP GENERAL PUBLIC LICENSE, Version 1, September 1998
.\" that should have been distributed together with this file.
.\"
.\" Дата последней коррекции перевода 30.11.2003
.\" Перевод с английского выполнил Виктор Вислобоков <corochoone@perm.ru>
.\" http://www.linuxshare.ru/projects/trans/mans.html
.\" Вычитано и скорректировано by alexm@hsys.msk.ru для проекта
.\" http://alexm.here.ru/manpages-ru/
.TH LS 1 1998-11 "GNU fileutils 4.0"
.SH ИМЯ
ls, dir, vdir \- выводит содержимое каталога
.SH ОБЗОР
.BI "ls [" опции "] [" файл... ]
.br
.BI "dir [" файл... ]
.br
.BI "vdir [" файл... ]
.sp
Опции POSIX:
.BI "[\-CFRacdilqrtu1] [\-\-]"
.sp
Опции GNU (краткая форма):
.B [\-1abcdfghiklmnopqrstuvwxABCDFGHLNQRSUX]
.BI "[\-w " cols ]
.BI "[\-T " cols ]
.BI "[\-I " шаблон ]
.B [\-\-full\-time]
.B [\-\-show\-control\-chars]
.BI "[\-\-block\-size=" размер ]
.B [\-\-format={long,verbose,commas,across,vertical,single\-column}]
.B [\-\-sort={none,time,size,extension}]
.B [\-\-time={atime,access,use,ctime,status}]
.B [\-\-color[={none,auto,always}]]
.B "[\-\-help] [\-\-version] [\-\-]"
.SH ОПИСАНИЕ
Программа
.B ls
сначала выводит список всех 
.I файлов
(не каталогов), перечисленных в командной строке, а затем выводит
список всех файлов, находящихся в каталогах, перечисленных в командной
строке.  Если не указано ни одного файла, то по умолчанию аргументом
назначается `.' (текущий каталог).  Опция \-d заставляет
.B ls
не считать аргументы-каталоги каталогами.  Будут отображаться только
файлы, которые не начинаются с `.' или все файлы, если задана опция
\-a.
.PP
Каждый список файлов (для файлов, которые не являются каталогами и
для каждого каталога, содержащего список файлов) сортируется отдельно
в алфавитной последовательности текущих региональных настроек (locale).
Когда указана опция \-l, то перед каждым списком выводится итоговая
строка с общим размером всех файлов в списке, который измеряется в
полу-килобайтах (512 байт).
.PP
Результаты печатаются на стандартный вывод, по одному файлу на строку,
если с помощью опции \-C не задан многоколоночный вывод.
Однако при выводе на терминал не определено, будет ли вывод осуществляться
в одну колонку или в несколько.  Для задания одноколоночного или
многоколоночного режима вывода могут использоваться опции \-1 и \-C,
соответственно.
.SH ОПЦИИ POSIX
.TP
.B "\-C"
Напечатать список файлов в колонках с вертикальной сортировкой.
.TP
.B "\-F"
Для каждого имени каталога добавлять суффикс `/', для каждого имени FIFO - `|'
и для каждого имени исполняемого файла `*'.
.TP
.B "\-R"
Включить рекурсивную выдачу списка каталогов.
.TP
.B "\-a"
Включать в список файлы с именем, начинающимся с `.'.
.TP
.B "\-c"
Использовать при сортировке (при задании опции \-t или \-l) время изменения
состояния файла вместо времени последней модификации файла.
.TP
.B "\-d"
Выдавать имена каталогов, как будто они обычные файлы, вместо того,
чтобы показывать их содержимое.
.TP
.B "\-i"
Предварять вывод для каждого файла его серийным номером (номером inode).
.TP
.B "\-l"
Выдавать (в одноколоночном формате) тип файла, права доступа к файлу,
количество ссылок на файл, имя владельца, имя группы, размер файла (в байтах),
временной штамп и имя файла.

Типы файлов могут принимать следующие значения:
.B \-
для обычного файла,
.B d
для каталога,
.B b
для блочного устройства,
.B c
для символьного устройства,
.B l
для символической ссылки,
.B p
для FIFO и
.B s
для гнезда (socket).

По умолчанию, временной штамп является временем последней модификации;
опции \-c и \-u позволяют выбрать два других временных штампа.
Для файлов устройств, поле размера обычно заменяется на старший и
младший номера устройства.
.TP
.B "\-q"
Вместо непечатаемых символов в имени файла при выводе будут ставиться
знаки вопроса. (Эта опция включена по умолчанию при выводе на терминал.)
.TP
.B "\-r"
Производить сортировку в обратном порядке.
.TP
.B "\-t"
Сортировать по показываемому временному штампу.
.TP
.B "\-u"
Использовать при сортировке (опция \-t) или перечислении (опция \-l)
время последнего доступа к файлу вместо времени последней модификации
файла.
.TP
.B "\-1"
Выдавать в одноколоночном формате.
.TP
.B "\-\-"
Завершает список опций.
.SH "ПОДРОБНОСТИ ВЕРСИИ GNU"
Если стандартный вывод является терминалом, то вывод производится в
многоколоночном формате (с вертикальной сортировкой).
.PP
Программа
.B dir
(также установленная под именем
.BR d )
является эквивалентом `ls\ \-C\ \-b'; таким образом, файлы по умолчанию
выдаются в многоколоночном формате (с вертикальной сортировкой).
Программа
.B vdir
(также установленная под именем
.BR v )
эквивалентна `ls\ \-l\ \-b'; таким образом, файлы по умолчанию выдаются
в длинном формате.
.SH "ОПЦИИ GNU"
.TP
.B "\-1, \-\-format=single\-column"
Выдавать один файл на строку. Эта опция включается по умолчанию, если
стандартный вывод не является терминалом.
.TP
.B "\-a, \-\-all"
Выдавать все файлы в каталогах, включая все файлы, начинающиеся с `.'.
.TP
.B "\-b, \-\-escape, \-\-quoting\-style=escape"
Заменять неграфические символы в именах файлов, используя
алфавитно-цифровые последовательности, а также последовательности вида
'\\000' с восьмеричными цифрами, как в языке C. Данная опция аналогична
.BR "\-Q" ,
за исключением того, что имена файлов не заключаются в двойные кавычки.
.TP
.B "\-c, \-\-time=ctime, \-\-time=status"
Сортировать содержимое каталога в соответствии с временем изменения
состояния файла (поле `ctime' в inode). Если с помощью опции
.B -l 
задан длинный формат, то выдавать время изменения состояния файла
вместо времени его модификации.
.TP
.B "\-d, \-\-directory"
Выдавать имена каталогов, как будто они обычные файлы, вместо того,
чтобы показывать их содержимое.
.TP
.B "\-f"
Не сортировать содержимое каталога; выдавать файлы в том порядке, в
котором они записаны на диск.
Эта опция также разрешает
.B \-a
и
.BR \-U
и запрещает
.BR \-l ,
.BR \-\-color ,
.BR \-s ,
и
.BR \-t ,
если они были заданы перед
.BR \-f .
.TP
.B \-g
Игнорируется; нужна для совместимости с Unix.
.TP
.B "\-h, \-\-human\-readable"
Добавлять к каждому размеру файла букву размера, например,
.B M
для двоичных мегабайт (`мебибайт').
(Новое в file\%utils-4.0.)
.TP
.B "\-i, \-\-inode"
Выдавать номер inode (также называемый серийным номером файла и
номером индекса) каждого файла, слева от его имени. (Этот номер
однозначно идентифицирует каждый файл в каждой файловой системе)
.TP
.B "\-k, \-\-kilobytes"
Если выдаются размеры файлов, то выдавать их в килобайтах.
.TP
.B "\-l, \-\-format=long, \-\-format=verbose"
В дополнении к имени каждого файла, выводятся тип файла, права доступа
к файлу, количество ссылок на файл, имя владельца, имя группы, размер
файла в байтах и временной штамп (время последней модификации файла,
если не задано другое). Для файлов с временем больше чем 6 месяцев
назад или больше, чем 1 час в будущее, временной штамп содержит
год вместо времени дня.

Каждый каталог со списком содержимого предваряется строкой
`total
.IR blocks ',
где
.IR blocks " --"
это общее дисковое пространство, используемое всеми файлами в данном
каталоге.  По умолчанию, размер блока составляет 1024 байта; если
установлена переменная окружения
.B POSIXLY_CORRECT ,
то используется размер блока 512 байт (если не задана опция
.B \-k 
.RI "). " blocks
считает каждую жесткую ссылку отдельно; задать по другому через аргументы
невозможно.

Права доступа отображаются в практически обычном символьном виде, но
.B ls
комбинирует несколько битов в третий символ каждого набора прав доступа:
.RS
.TP
.B s
Если setuid или setgid бит установлены вместе с соответствующим битом
прав на выполнение.
.TP
.B S
Если setuid или setgid бит установлены, но соответствующий бит прав
на выполнение не установлен.
.TP	  
.B t
Если sticky-бит установлен вместе с битом прав на выполнение остальными.
.TP
.B T
Если sticky-бит установлен, но бит прав на выполнение остальными нет.
.TP
.B x
Если бит прав на выполнение установлен, и не выполняется ни одно из
вышеуказанных условий.
.TP
.B \-
Во всех остальных случаях.
.RE     
.TP
.B "\-m, \-\-format=commas"
Выдавать список файлов в строчку с максимально возможным количеством
имен файлов на строку, разделяя имена запятой и пробелом.
.TP
.B "\-n, \-\-numeric\-uid\-gid"
Выдавать числовые UID и GID вместо имен владельца и группы.
.TP
.B \-o
Применять длинный формат, но не показывать информацию о группе.
Данная опция эквивалентна
.BR "\-\-format=long \-\-no\-group" .
Данная опция предоставляется для совместимости с другими версиями
.BR ls .		    
.TP
.B "\-p, \-\-file\-type, \-\-indicator\-style=file\-type"
Добавлять символ, показывающий тип файла, к каждому имени файла. Данная
опция похожа на
.BR \-F ,
за исключением того, что исполняемые файлы не помечаются.
(Фактически в fileutils-4.0 опция --file-type эквивалентна --classify.)
.TP
.B "\-q, \-\-hide\-control\-chars"
Выдавать знаки вопроса вместо неграфических символов в имени файла.
Эта опция включена по умолчанию.
.TP
.B "\-r, \-\-reverse"
Сортировать содержимое каталога в обратном порядке.
.TP
.B "\-s, \-\-size"
Выдавать размер каждого файла в блоках по 1024 байта слева от имени файла.
Если установлена переменная окружения
.BR POSIXLY_CORRECT ,
то применяется размер блока 512, если не задана опция 
.B \-k .
.TP
.B "\-t, \-\-sort=time"
Сортировать по времени последней модификации (поле `mtime' в inode)
вместо того, чтобы производить сортировку по алфавиту. Самые свежие
файлы будут отображаться первыми.
.TP
.B "\-u, \-\-time=atime, \-\-time=access, \-\-time=use"
Сортировать по времени последнего доступа к файлу, вместо времени
последней модификации (поле `atime' в inode). Если задан длинный
формат вывода, выдавать время последнего доступа вместо времени
последней модификации.
.TP
.B "\-v"
Производить сортировку в соответствии с номером версии файлов.  При
этом учитывается, что имена файлов часто содержат номера версий или
порядковые номера.  Стандартные
функции сортировки обычно не обеспечивают сортировку, которую мог бы
ожидать человек, так как сортировка производится на основе посимвольного
сравнения. Сортировка по версиям решает эту проблему и особенно полезна,
когда производится просмотр каталогов, содержащих много файлов, у
которых в имени есть номер версии. Например:

.nf
     > ls -1            > ls -1v
     foo.zml-1.gz       foo.zml-1.gz
     foo.zml-100.gz     foo.zml-12.gz
     foo.zml-12.gz      foo.zml-25.gz
     foo.zml-25.gz      foo.zml-100.gz
.fi

Заметим, что цифровые части с лидирующими нулями определяются как
более маленькие:

.nf
     > ls -1            > ls -1v
     abc-1.007.tgz      abc-1.007.tgz
     abc-1.012b.tgz     abc-1.01a.tgz
     abc-1.01a.tgz      abc-1.012b.tgz
.fi

(Новое в file\%utils-4.0.)
.TP
.BI "\-w, \-\-width " cols
Назначает вывод на экран в
.I cols
колонок. По умолчанию, если это возможно, данное значение узнается от драйвера
терминала; в противном случае используется значение переменной окружения
.BR COLUMNS ,
если она установлена; в противном случае, по умолчанию, устанавливается 80.
.TP
.B "\-x, \-\-format=across, \-\-format=horizontal"
Выдавать список файлов в многоколоночном режиме, с сортировкой по
горизонтали. 
.TP
.B "\-A, \-\-almost\-all"
Выдавать все файлы, кроме `.' и `..'.
.TP
.B "\-B, \-\-ignore\-backups"
Не показывать файлы, которые заканчиваются на `~', если они не заданы в
командной строке.
.TP
.B "\-C, \-\-format=vertical"
Выдавать файлы в многоколоночном режиме, с сортировкой по вертикали.
Опция устанавливается по умолчанию, если стандартный вывод является
терминалом. Данная опция всегда устанавливается по умолчанию для программ
.BR dir " и " d .
.TP
.B "\-D, \-\-dired"
При длинном формате
.RB ( \-l ) ,
после основного вывода, выдавать дополнительную строку вида:
.br
.B //DIRED//
.I BEG1 END1 BEG2 END2 ...
.br

Здесь
.IR BEGn " и " ENDn " --"
это целые беззнаковые числа, которые для каждой записи показывают
байтовую позицию начала и конца каждого имени файла. Таким образом,
Emacs может легко найти имена, даже когда они содержат необычные
символы, такие как пробелы или символы новой строки.

Если каталоги отображаются рекурсивно
.RB ( \-R ),
то похожая строка выводится после каждого подкаталога:
.br
.B //SUBDIRED//
.I BEG1 END1 ...
.TP
.B "\-F, \-\-classify, \-\-indicator\-style=classify"
Добавлять к каждому имени файла символ, показывающий его тип.  Для
обычных исполняемых файлов это `*'.  Для каталога добавляется `/', для
FIFO - `|', для символических ссылок `@', для гнезд `=', для обычных
файлов ничего не добавляется.
.TP
.B "\-G, \-\-no\-group"
Не отображать информацию о группе в длинном формате вывода.
.TP
.B "\-H, \-\-si"
Делает то же, что и опция
.BR \-h ,
но использует официальные единицы измерения SI (где для расчетов
используется 1000 вместо 1024 и, таким образом, M -- это 1000000 вместо
10485576).
(Новое в fileutils-4.0.)
.TP
.BI "\-I, \-\-ignore=" шаблон
Не показывать файлы, имена которых совпадают с заданным
.I шаблоном
(шаблон - это не регулярное выражение), если только они не заданы в
командной строке. Как и в shell, начальная `.' в имени файла не
совпадает с символом `*', заданным в начале
.IR шаблона .
Чтобы спрятать ваши каталоги, вы можете просто
добавить LS_OPTIONS="$LS_OPTIONS -I mystuff" в /etc/profile.
.TP
.B "\-L, \-\-dereference"
Выдавать информацию о файлах, на которые указывают символические ссылки,
вместо информации о самих символических ссылках.
.TP
.B "\-N, \-\-literal"
Не заключать в кавычки имена файлов.
.TP
.B "\-Q, \-\-quote\-name, \-\-quoting\-style=c"
Заключать имена файлов в двойные кавычки и показывать неграфические
символы как в языке С.
.TP
.B "\-R, \-\-recursive"
Рекурсивно выдавать список содержимого всех каталогов.
.TP
.B "\-S, \-\-sort=size"
Производить сортировку по размеру файла, вместо сортировки по алфавиту.
Таким образом, наибольшие файлы будут показаны сначала.
.TP
.BI "\-T, \-\-tabsize " cols
Назначить ширину табуляции в
.I cols
колонок. По умолчанию 8, может быть также задано с помощью переменной
окружения TABSIZE, если при этом не установлена переменная окружения
POSIXLY_CORRECT.
.B ls
использует табуляцию для выравнивания вывода, когда это возможно. Если
.I cols 
равно нулю, то табуляция не используется.
.TP
.B "\-U, \-\-sort=none"
Не производить сортировку; список файлов будет выдаваться в том порядке,
в каком файлы записаны на диск. (отличие между опциями
.BR \-U " и " \-f 
состоит в том, что данная опция не запрещает и не разрешает другие опции).
Эта опция может быть особенно полезна, когда выдаются списки содержимого
очень больших каталогов, при этом сортировка не выполняется и весь процесс
происходит быстрее).
.TP
.B "\-X, \-\-sort=extension"
Производить сортировку в алфавитном порядке по расширениям файлов
(символы после последней `.'); файлы без расширений будут показаны
первыми.
.TP
.BI "\-\-block\-size=" size
Выдает размеры в блоках по
.I size
байт.
(Новое в file\%utils-4.0.)
.TP
.BI "\-\-color[=" when ]
Задает цвет для различения типов файлов.  Цвета задаются с использованием
переменной окружения 
.BR LS_COLORS . 
Информацию о том, как нужно задавать значение этой переменной, можно
найти в странице руководства
.BR dircolors (1). 
Параметр
.I when
может быть опущен или принимать одно из следующих значений:
.RS
.TP
.B none
Вообще не использовать цвет. Установлено по умолчанию.
.TP
.B auto
Использовать цвет, только если стандартный вывод является терминалом.
.TP
.B always
Всегда использовать цвет. Задание
.B \-\-color
без параметра
.I when
эквивалентно
.BR "\-\-color=always" .
.RE
.TP
.B "\-\-full\-time"
Выдавать время в полном, а не в стандартном сокращенном варианте.
Данный формат выглядит так же, как и в команде
.BR date (1)
по умолчанию; его невозможно изменить, но вы можете извлечь строку
с датой через команду
.BR cut (1)
и пропустить результат через `date \-d'.

Это может быть очень полезно, потому что время в таком формате включает
секунды. (Файловые системы Unix записывают временной штамп файла с
округлением до секунды, так что данная опция показывает полную информацию
о временном штампе). Например, это может помочь, если вы разбираетесь, 
почему некий Makefile неправильно перегенерирует файлы.
.TP
.BI "\-\-quoting\-style=" word
Используйте стиль
.I word
для выбора режима квотинга имен файлов. Стиль
.I word
может принимать следующие значения:
.RS
.TP
.B literal
Вывод имен файлов как есть. Это поведение
.BR ls 
по умолчанию.
.TP
.B shell
Заключает имена файлов в одиночные кавычки для shell, если они
содержат метасимволы или могут привести к неоднозначной выдаче.
.TP
.B "shell\-always"
Заключает имена файлов в одиночные кавычки для shell, даже
если этого не требуется.
.TP
.B c
Заключает имена файлов в двойные кавычки, как в языке C; это
равносильно опции
.BR -Q .
.TP
.B escape
Как и для
.IR c ,
за исключением того, что имя не заключается в двойные кавычки;
эквивалентно опции
.B "\-b".
.PD
.PP
Значение по умолчанию для данной опции может быть задано в переменной
окружения QUOTING_STYLE.  (См. ниже главу
.BR ОКРУЖЕНИЕ ).
.RE
.TP
.B "\-\-show\-control\-chars"
Выдавать неграфические символы в именах файлов как есть. Так задано
по умолчанию, если вывод осуществляется на терминал, а программа
называется
.BR ls .
.SH "СТАНДАРТНЫЕ ОПЦИИ GNU"
.TP
.B "\-\-help"
Выдать подсказку на стандартный вывод и успешно завершиться.
.TP
.B "\-\-version"
Выдать информацию о версии на стандартный вывод и успешно завершиться.
.TP
.B "\-\-"
Служит для обозначения конца списка опций.
.SH ОКРУЖЕНИЕ
Переменная POSIXLY_CORRECT определяет размер блока.
Переменная TABSIZE задает ширину табуляции, если не установлена
переменная POSIXLY_CORRECT.
Переменная COLUMNS (когда она содержит целое число) определяет ширину
вывода в колонках (для использования с опцией \-C).
Имена файлов не должны обрезаться, чтобы уместить их в многоколоночном
выводе.
.PP
При работе обычным образом используются значения переменных LANG, LC_ALL, LC_CTYPE и
LC_MESSAGES.
Переменная TZ задает временную зону для временных меток, которые выдает
.BR ls .
Переменная LS_COLORS используется для задания цветов.
Переменная LS_OPTIONS хранит опции по умолчанию.
.\" Начиная с какой версии?
.PP
Переменная QUOTING_STYLE используется для задания значения по умолчанию
для опции
.BR "\-\-quoting\-style" .
Данная опция по умолчанию установлена в
.BR literal ,
но авторы предупреждают, что это умолчание может когда-нибудь в
следующей версии измениться на
.BR shell .
.SH ОШИБКИ РЕАЛИЗАЦИИ
В BSD системах
.B ls
выдает размеры, которые являются наполовину меньше правильных, для
файлов, которые смонтированы по NFS из HP-UX систем. В HP-UX системах
.B ls
выдает размеры, которые в два раза больше правильных для файлов,
которые смонтированы по NFS из BSD систем. Это недостаток систем HP-UX;
он также есть и в программе 
.B ls
из HP-UX.
.SH СОВМЕСТИМОСТЬ
POSIX 1003.2
.SH СМОТРИ ТАКЖЕ
.BR dircolors (1)
.SH ЗАМЕЧАНИЯ
Данная страница описывает версию
.B ls
из пакета fileutils-4.0;
другие версии могут иметь небольшие отличия.
Исправления и дополнения присылайте по адресу aeb@cwi.nl.
Отчеты об ошибках в этой программе присылайте по адресу
fileutils-bugs@gnu.ai.mit.edu.
.SH ПЕРЕВОД
Перевёл с английского Виктор Вислобоков <corochoone@perm.ru> 2003

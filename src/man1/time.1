.\" Copyright Andries Brouwer, 2000
.\"
.\" This page is distributed under GPL.
.\" Some fragments of text came from the time-1.7 info file.
.\" Inspired by kromJx@crosswinds.net.
.\"
.\" Дата последней коррекции перевода: 30.11.2003
.\" Перевод с английского выполнил Виктор Вислобоков <corochoone@perm.ru>
.\" http://www.linuxshare.ru/projects/trans/mans.html
.\"
.TH TIME 1 2000-12-11 "" ""
.SH ИМЯ
time \- время выполнения простой команды или получение подсказки по ресурсу
.SH ОБЗОР
.BI "time [" опции "] " команда " [" аргументы... "] "
.SH ОПИСАНИЕ
Команда
.B time
запускает указанную
.I команду
с заданными аргументами.
Когда
.I команда
завершается,
.B time
выводит на стандартный вывод статистическое сообщение об использованном
времени при этом запуске. Эта статистика содержит (i) реальное время
выполнение между вызовом и завершением, (ii) время CPU, которое занял
пользователь
(сумма значений
.I tms_utime
и
.I tms_cutime
в структуре
.I "struct tms" ,
которая возвращается вызовом
.BR times (2)),
и (iii) время CPU занятое системой (сумма значений
.I  tms_stime
и
.I tms_cstime
в структуре
.I "struct tms" ,
которая возвращается вызовом
.BR times (2)).
.SH ОПЦИИ
.TP
.B \-p
Когда используется локаль POSIX, используется точный традиционный
формат
.br
.in +5
"real %f\enuser %f\ensys %f\en"
.in -5
.br
(с цифрами в секундах)
где число разрядов в выводе для %f не задаётся, но является
достаточным для точного выражения времени и по крайней мере
разрядов не меньше одного.
.SH ОКРУЖЕНИЕ
Используются переменные LANG, LC_ALL, LC_CTYPE, LC_MESSAGES, LC_NUMERIC,
NLSPATH и PATH. Последняя для поиска
.IR команды .
Оставшиеся используются для вывода текста и его форматирования.
.SH "КОД ВОЗВРАТА"
Если
.I команда
была вызвана, то код возврата соответствует тому, который возвращает
.IR команда .
В противном случае он равен 127, если
.I команда
не найдена, 126 если она найдена, но не может быть вызвана и некоторому
другому отличному от нуля значению (1-125), если случились какие-либо
другие ошибки.
.SH "СМОТРИ ТАКЖЕ"
.BR times (2),
.sp 2
.SH "ВЕРСИЯ GNU"
Ниже дано описание GNU 1.7
.BR time .
Несмотря на имя утилиты, GNU выводит большое количество полезной
информации, не только об использованном времени, но также и
о других ресурсах, таких как памяти, ввода/вывода и вызовах IPC (там
где это доступно). Вывод форматируется, используя строку форматирования,
которую можно задать с помощью опции \-f или переменной окружения
TIME.
.LP
По умолчанию строка форматирования имеет вид:
.br
.in +3
%Uuser %Ssystem %Eelapsed %PCPU (%Xtext+%Ddata %Mmax)k
.br
%Iinputs+%Ooutputs (%Fmajor+%Rminor)pagefaults %Wswaps
.br
.in -3
.LP
Если задана опция \-p, то используется переносимый формат
вывода:
.br
.in +3
real %e
.br
user %U
.br
sys %S
.br
.in -3
.SS "Строка форматирования"
Формат интерпретируется таким же способом как и в printf.
Обычные символы просто копируются, табуляции, символы
новой строки и обратная косая черта изолируются используя
\et, \en и \e\e,
знак процента указывается как %%, и наконец % указывает
на преобразование следующего за ним символа. Программа
.B time
всегда будет добавлять вначале вывода новую строку.
Преобразования выглядят следующим образом. Все они
поддерживаются 
.BR tcsh (1) .
.LP
.B "Время"
.TP
.B %E
Фактически затраченное время (в формате [часы:]минуты:секунды).
.TP
.B %e
(Нет в tcsh.) Фактически затраченное время (в секундах).
.TP
.B %S
Общее количество секунд времени CPU, которое процесс провел в
режиме ядра.
.TP
.B %U
Общее количество секунд времени CPU, которое процесс провел в
режиме пользователя.
.TP
.B %P
Процент работы CPU, который был затрачен на работу этого процесса,
вычисляется как (%U + %S) / %E.
.LP
.B "Память"
.TP
.B %M
Максимальный резидентный размер процесса в течении его
выполнения в килобайтах.
.TP
.B %t
(Нет в tcsh.) Средний резидентный размер процесса в
килобайтах.
.TP
.B %K
Среднее общее использование памяти (данные+стек+текст) процессом
в килобайтах.
.TP
.B %D
Средний размер неразделяемой области данных процесса в килобайтах.
.TP
.B %p
(Нет в tcsh.) Средний размер неразделяемого пространства стека процесса
в килобайтах.
.TP
.B %X
Средний размер разделяемого текста процесса в килобайтах.
.TP
.B %Z
(Нет в tcsh.) Размер системной страницы в байтах.
Это значение является постоянным для какой-либо системы, но может
меняться для разных систем.
.TP
.B %F
Number of major page faults that occurred while the process was running.
These are faults where the page has to be read in from disk.
.TP
.B %R
Number of minor, or recoverable, page faults.
These are faults for pages that are not valid but which have
not yet been claimed by other virtual pages.  Thus the data
in the page is still valid but the system tables must be updated.
.TP
.B %W
Количество раз, которое процессор был выгружен на своппинг из
основной памяти.
.TP
.B %c
Количество раз, которое программа попала под неплановое переключение
контекста (потому что истёк выделенный ему отрезок времени).
.TP
.B %w
Количество ожиданий: сколько раз программа попала под неплановое
переключение котекста например во время ожидания завершения операций
ввода/вывода.
.LP
.B "Ввод/вывод"
.TP
.B %I
Количество считываний файловой системы на процесс.
.TP
.B %O
Количество записей в файлововую систему на процесс.
.TP
.B %r
Количество сообщений на сокете, принятых процессом.
.TP
.B %s
Количество сообщений, отправленных процессом в сокет.
.TP
.B %k
Количество сигналов, доставленных процессу.
.TP
.B %C
(Нет в tcsh.) Имя и аргументы командной строки той команды,
которая была запущена.
.TP
.B %x
(Нет в tcsh.) Код возврата запущенной команды.
.SH "ОПЦИИ GNU"
.TP
.BI "\-f " ФОРМАТ ", \-\-format=" ФОРМАТ
Задаёт формат вывода, этот формат перекрывает формат, заданный
в переменной окружения TIME.
.TP
.B "\-p, \-\-portability"
Использовать переносимый формат вывода.
.TP
.BI "\-o " ФАЙЛ ", \-\-output=" ФАЙЛ
Результат работы направлять в указанный файл, перезаписывая его,
а не на стандартный вывод ошибок.
.TP
.B "\-a, \-\-append"
(Используется совместо с \-o.) Не перезаписывать файл, а дополнять
его.
.TP
.B "\-v, \-\-verbose"
Выводить подробности при работе.
.SH "СТАНДАРТНЫЕ ОПЦИИ GNU"
.TP
.B "\-\-help"
Выдать подсказку на стандартный вывод и успешно завершиться.
.TP
.B "\-\-version"
Выдать информацию о версии на стандартный вывод и успешно завершиться.
.TP
.B "\-\-"
Служит для обозначения конца списка опций.
.SH ОШИБКИ
Не все ресурсы могут быть получены на всех версиях Unix,
так некоторые значения могут быть нулевыми. То, что здесь
описано в основном было основано на данных, которые
предоставляет 4.2 или 4.3BSD.
.LP
Программа GNU time версии 1.7 пока не локализована.
Таким образом, она не реализует требования POSIX.
.LP
Переменная окружения TIME была выбрана плохо.
The environment variable TIME was badly chosen.
It is not unusual for systems like autoconf or make
to use environment variables with the name of a utility to override
the utility to be used. Uses like MORE or TIME for options to programs
(instead of program path names) tend to lead to difficulties.
.LP
It seems unfortunate that \-o overwrites instead of appends.
(That is, the \-a option should be the default.)
.LP
Советы и сообщения об ошибках по GNU
.B time
присылайте на E-mail
.br
.I bug-utils@prep.ai.mit.edu
.br
Пожалуйста указывайте версию
.B time ,
которую можно узнать, запустив
.br
.I time --version
.br
и операционную систему, а также компилятор C который вы использовали.
.SH "СМОТРИ ТАКЖЕ"
.BR tcsh (1),
.BR times (2),
.BR wait3 (2)
.SH АВТОРЫ
.TP
.IP "David Keppel"
Оригинальная версия
.IP "David MacKenzie"
POSIXization, autoconfiscation, GNU getoptization,
documentation, other bug fixes and improvements.
.IP "Arne Henrik Juul"
Помощь в вопросах переносимости
.IP "Francois Pinard"
Помощь в вопросах переносимости
.SH ПЕРЕВОД
Перевёл с английского Виктор Вислобоков <corochoone@perm.ru> 2003

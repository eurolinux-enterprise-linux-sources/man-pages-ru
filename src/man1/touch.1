.\" Copyright Andries Brouwer, Ragnar Hojland Espinosa and A. Wik, 1998.
.\"
.\" This file may be copied under the conditions described
.\" in the LDP GENERAL PUBLIC LICENSE, Version 1, September 1998
.\" that should have been distributed together with this file.
.\" 
.\" Дата последней коррекции перевода: 30.11.2003
.\" Перевод с английского выполнил Виктор Вислобоков <corochoone@perm.ru>
.\" http://www.linuxshare.ru/projects/trans/mans.html
.\" Вычитано и скорректировано by alexm@hsys.msk.ru для проекта
.\" http://alexm.here.ru/manpages-ru/
.TH TOUCH 1 1998-11 "GNU fileutils 4.0"
.SH ИМЯ
touch \- изменяет временные штампы файла
.SH ОБЗОР
.B touch
.BI "[\-acm][\-r " ref_file "|\-t " время "] [\-\-]" файл...
.sp
Устаревшая версия:
.br
.B touch
.BI "[\-acm][" ugly_time "] " файл...
.sp
Версия GNU:
.br
.B touch
.BI "[\-acfm] [\-r " файл "] [\-t " decimtime ]
.BI "[\-d " time "] [\-\-time={atime,access,use,mtime,modify}]"
.BI "[\-\-date=" время "] [\-\-reference=" файл ]
.BI "[\-\-no\-create] [\-\-help] [\-\-version] [\-\-] " файл...
.SH ОПИСАНИЕ
.B touch
изменяет время последнего доступа и/или время последней модификации
каждого заданного
.IR файла .
Эти временные штампы устанавливаются в текущее время; или, если задана
опция \-r, то эти штампы устанавливаются в те же, что имеет файл
.IR ref_file ;
или, если задана опция \-t, то эти штампы устанавливаются на заданное 
.IR время .
Оба штампа изменяются, если не задана ни одна из опций \-a и \-m
или если заданы они обе. Если задана только опция \-a или только \-m,
то изменяться будет, соответственно, только время последнего доступа
или время последней модификации. Если заданный файл еще не существует,
то он создается (как пустой файл с правами доступа 0666, с учетом
umask), если не задана опция \-c. 
.SH "ОПЦИИ POSIX"
.TP
.B \-a
Изменить время последнего доступа к
.IR файлу .
.TP
.B \-c
Не создавать
.IR файл .
.TP
.B \-m
Изменять время последней модификации
.IR файла .
.TP
.BI "\-r " ref_file
Использовать соответствующий временной штамп от файла
.I ref_file
в качестве нового значения для изменяемого временного штампа (или штампов).
.TP
.BI "\-t " время
Использовать заданное время в качестве нового значения для изменяемого
временного штампа (или штампов).  Аргумент является десятичным числом
вида
.br
.nf
    [[ВВ]ГГ]ММДДччмм[.СС]
.br
.fi
с очевидными обозначениями (ВВ - век, ГГ - год, ММ - месяц, ДД - день,
чч - часы, мм - минуты, СС - секунды).  Если ВВ не задан, то год ВВГГ берется из
диапазона 1969-2068. Если СС не задано, то берется 0. Секунды могут
быть заданы в диапазоне 0-61, чтобы можно было указать високосную
секунду. Считается, что результирующее время соответствует часовому
поясу, заданному в переменной окружения TZ.  Если
в результате получилось время до 1 января 1970 года, то будет
выдана ошибка.
.TP
.B "[\-\-]"
Завершает список опций.
.SH "ДЕТАЛИ ВЕРСИИ POSIX"
Вторая форма вызова имеет неудачный синтаксис, который может вызвать
некоторую двусмысленность, так как непонятно, что именно задает аргумент 
.IR ugly_time :
время или файл.  Если не указаны опции \-r и \-t, и задано не менее двух 
аргументов, причем первый аргумент является восьми- или десятизначным
числом, то считается, что аргумент
.I ugly_time
задает время.  Формат
.I ugly_time
выглядит как ММДДччмм[гг], причем 
.I гг
в диапазоне 69-99, означает 1969-1999, а случай, когда
.I гг
не задан, означает текущий год. Данная форма вызова устарела.
.SH "ДЕТАЛИ ВЕРСИИ GNU"
Если первый
.I файл
может быть правильным аргументом для опции
.BR \-t ,
и временной штамп не задан с помощью опций 
.BR "\-d" ,
.BR "\-r"
или
.BR \-t ,
и не задан аргумент `\-\-', то этот
.I файл
интерпретируется как временной штамп для других файлов, а не как имя 
файла.
.PP
Если задано изменение как времени последнего доступа, так и времени
последней модификации файла на текущее время, то
.B touch
может изменять эти временные штампы для файлов, которыми пользователь
не владеет, но в которые у него есть права на запись. 
Во всех других случаях, пользователь должен владеть этими файлами.
.SH "ОПЦИИ GNU"
.TP
.B "\-a, \-\-time=atime, \-\-time=access, \-\-time=use"
Изменять только время последнего доступа.
.TP
.B "\-c, \-\-no\-create"
Не создавать файлы, которые не существуют.
.TP
.BI "\-d, \-\-date=" время
Использовать
.I время
вместо текущего времени.  Оно может содержать имена месяцев, часовые
пояса, `am' и `pm', и т.\~д.
.TP
.B "\-f"
Игнорируется; для совместимости с BSD версией
.BR touch (1).
.TP
.B "\-m, \-\-time=mtime, \-\-time=modify"
Изменять только время последней модификации.
.TP
.BI "\-r " file ", \-\-reference=" файл
Использовать время указанного
.I файла
вместо текущего времени.
.TP
.BI "\-t " decimtime
Здесь
.I decimtime
имеет формат ММДДччмм[[ВВ]ГГ][.сс]
Использовать аргумент (месяц, день, часы, минуты, необязательный век,
год, секунды) вместо текущего времени.
Заметим, что этот формат нарушает спецификацию POSIX.
.SH "СТАНДАРТНЫЕ ОПЦИИ GNU"
.TP
.B "\-\-help"
Выдать подсказку на стандартный вывод и успешно завершиться.
.TP
.B "\-\-version"
Выдать информацию о версии на стандартный вывод и успешно завершиться.
.TP
.B "\-\-"
Служит для обозначения конца списка опций.
.SH ОКРУЖЕНИЕ
Для интерпретации явно заданного времени используется переменная TZ.
При работе обычным образом используются значения переменных LANG, LC_ALL, LC_COLLATE,
LC_CTYPE и LC_MESSAGES.
.SH СОВМЕСТИМОСТЬ
POSIX 1003.2 описывает синтаксис для аргумента опции \-t, который
отличается от того, что используется в реализации GNU.
.SH "ПРИМЕР ИСПОЛЬЗОВАНИЯ"
Команда
.I touch foo
создаст файл
.IR foo ,
если он не существует,
и изменит время последней модификации на текущее. Это очень часто
используется для управления действиями программы
.BR make .
.SH ЗАМЕЧАНИЯ
Данная страница описывает версию
.B touch
из пакета fileutils-4.0;
другие версии могут иметь небольшие отличия.
Исправления и дополнения присылайте по адресу aeb@cwi.nl.
Отчеты об ошибках в этой программе присылайте по адресу
fileutils-bugs@gnu.ai.mit.edu.
.SH ПЕРЕВОД
Перевёл с английского Виктор Вислобоков <corochoone@perm.ru> 2003

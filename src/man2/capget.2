.\"
.\" $Id: capget.2,v 1.4 1999/09/09 16:43:26 morgan Exp $
.\" written by Andrew Morgan <morgan@linux.kernel.org>
.\" may be distributed as per GPL
.\" Modified by David A. Wheeler <dwheeler@ida.org>
.\"
.\" Дата последней коррекции перевода 12.12.2003
.\" Перевод с английского сделал Виктор Вислобоков <corochoone@perm.ru>
.\" http://www.linuxshare.ru/projects/trans/mans.html
.\"
.TH CAPGET 2 1999-09-09 "Linux 2.2" "Руководство программиста Linux"
.SH ИМЯ
capget, capset \- установить/получить возможности процесса
.SH ОБЗОР
.B #undef _POSIX_SOURCE
.br
.B #include <sys/capability.h>
.sp
.BI "int capget(cap_user_header_t " header ", cap_user_data_t " data );
.sp
.BI "int capset(cap_user_header_t " header ", const cap_user_data_t " data );
.SH ОПИСАНИЕ
В Linux 2.2, сила суперпользователя (root) была разделена на
список отдельных возможностей. Каждый процесс имеет список
Эффективных возможностей, которые он может в данный момент
использовать. Каждый процесс также имеет список Унаследованных
возможностей, которые могут быть переданы через execve(2),
и список Разрешённых возможностей, которые он может
сделать эффективными или унаследованными.
.PP
Две указанные выше функции являются низкоуровневым интерфейсом
ядра для получения и установки данных возможностей. Для Linux
не только эти функции являются специфичными, но и API ядра
для изменения и использования этих функций (в особенности
формата типов
.B cap_user_*_t )
также является предментом изменений с каждой новой версией ядра.
.sp
Переносимыми являются вызовы
.IR cap_set_proc (3)
и
.IR cap_get_proc (3);
если это возможно, вы должны использовать в приложениях именно их.
Если вы хотите использовать в приложениях расширения Linux, вы
можете использовать более удобные вызовы
.IR capsetp (3)
и 
.IR capgetp (3).
.SH "ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ"
В случае успеха возвращается ноль. В случае ошибки возвращается \-1
и значение
.I errno
устанавливается соответствующим образом.
.SH ОШИБКИ
.TP
.B EINVAL
Один из аргументов недопустим.
.TP
.B EPERM
Была сделана попытка добавить возможность, которой нет в списке
Разрешённых к списку Разрешённых, Эффективных или Унаследованных
возможностей.
.\" .TP
.\" .B ESRCH
.\" No such process.
.\" .TP
.\" .B EFAULT
.\" Bad memory address.
.SH "ПРОЧАЯ ИНФОРМАЦИЯ"
Переносимые функции для запроса и установки возможностей
предоставляются библиотекой
.B libcap
которая доступна по адресу:
.br
.B ftp://linux.kernel.org/pub/linux/libs/security/linux-privs
.SH "СМОТРИ ТАКЖЕ"
.BR capabilities (7)
.SH ПЕРЕВОД
Перевёл с английского Виктор Вислобоков <corochoone@perm.ru> 2003

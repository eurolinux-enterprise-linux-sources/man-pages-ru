.\" man2/inotify_add_watch.2 - inotify_add_watch man page
.\"
.\" Copyright (C) 2005 Robert Love
.\" and Copyright, 2006 Michael Kerrisk
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111,
.\" USA.
.\"
.\" 2005-07-19 Robert Love <rlove@rlove.org> - initial version
.\" 2006-02-07 mtk, various changes
.\"
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH INOTIFY_ADD_WATCH 2 2010\-10\-20 Linux "Руководство программиста Linux"
.SH ИМЯ
inotify_add_watch \- добавляет сторожок к инициализированному экземпляру
inotify
.SH ОБЗОР
\fB#include <sys/inotify.h>\fP
.sp
\fBint inotify_add_watch(int \fP\fIfd\fP\fB, const char *\fP\fIpathname\fP\fB, uint32_t
\fP\fImask\fP\fB);\fP
.SH ОПИСАНИЕ
Вызов \fBinotify_add_watch\fP() добавляет новый сторожок (watch) или изменяет
существующий, для файла, чьё расположение указано в \fIpathname\fP; вызывающий
должен иметь право читать этот файл. Аргумент \fIfd\fP является файловым
дескриптором, ссылающимся на экземпляр inotify, у которого изменяется список
сторожков. Отслеживаемые с \fIpathname\fP события указываются маской битов в
аргументе \fImask\fP. Описание битов \fImask\fP смотрите в \fBinotify\fP(7).

При успешном выполнении \fBinotify_add_watch\fP() возвращает уникальный
дескриптор сторожка, связанный с \fIpathname\fP для данного экземпляра
inotify. Если ранее \fIpathname\fP на наблюдался данным экземпляром inotify, то
создаётся новый дескриптор сторожка. Если \fIpathname\fP уже отслеживался, то
возвращается дескриптор существующего сторожка.

Дескриптор сторожка возвращается при последующих операциях \fBread\fP(2) из
файлового дескриптора inotify. При чтении извлекаются структуры
\fIinotify_event\fP (см. \fBinotify\fP(7)), указывающие на события в файловой
системе; дескриптор сторожка внутри этой структуры определяет объект, для
которого произошло событие.
.SH "ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ"
При удачном завершении \fBinotify_add_watch\fP() возвращает неотрицательный
дескриптор сторожка. При ошибке возвращается \-1, а значение \fIerrno\fP
устанавливается соответствующим образом.
.SH ОШИБКИ
.TP 
\fBEACCES\fP
Нет прав на чтение указанного файла.
.TP 
\fBEBADF\fP
Указан неверный файловый дескриптор.
.TP 
\fBEFAULT\fP
\fIpathname\fP указывает за пределы доступного адресного пространства.
.TP 
\fBEINVAL\fP
Указанная маска событий не содержит допустимых событий; или \fIfd\fP не
является файловым дескриптором inotify.
.TP 
\fBENOENT\fP
Один из каталогов в \fIpathname\fP не существует или является повисшей
символьной ссылкой.
.TP 
\fBENOMEM\fP
Недостаточное количество памяти ядра.
.TP 
\fBENOSPC\fP
Достигнуто максимальное количество сторожков inotify доступных пользователю
или ядру не удалось выделить необходимые ресурсы.
.SH ВЕРСИИ
Inotify был добавлен в ядро Linux версии 2.6.13.
.SH "СООТВЕТСТВИЕ СТАНДАРТАМ"
Данный вызов есть только в Linux.
.SH "СМОТРИТЕ ТАКЖЕ"
\fBinotify_init\fP(2), \fBinotify_rm_watch\fP(2), \fBinotify\fP(7)

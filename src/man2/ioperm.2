.\" Hey Emacs! This file is -*- nroff -*- source.
.\"
.\" Copyright (c) 1993 Michael Haardt
.\" (michael@moria.de)
.\" Fri Apr  2 11:32:09 MET DST 1993
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111,
.\" USA.
.\"
.\" Modified Sat Jul 24 15:12:05 1993 by Rik Faith <faith@cs.unc.edu>
.\" Modified Tue Aug  1 16:27    1995 by Jochen Karrer
.\"                              <cip307@cip.physik.uni-wuerzburg.de>
.\" Modified Tue Oct 22 08:11:14 EDT 1996 by Eric S. Raymond <esr@thyrsus.com>
.\" Modified Mon Feb 15 17:28:41 CET 1999 by Andries E. Brouwer <aeb@cwi.nl>
.\" Modified, 27 May 2004, Michael Kerrisk <mtk.manpages@gmail.com>
.\"     Added notes on capability requirements
.\"
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH IOPERM 2 2007\-06\-15 Linux "Руководство программиста Linux"
.SH ИМЯ
ioperm \- устанавливает права на работу с портами ввода/вывода
.SH ОБЗОР
\fB#include <unistd.h>\fP /* для libc5 */
.br
\fB#include <sys/io.h>\fP /* для glibc */
.sp
\fBint ioperm(unsigned long \fP\fIfrom\fP\fB, unsigned long \fP\fInum\fP\fB, int
\fP\fIturn_on\fP\fB);\fP
.SH ОПИСАНИЕ
\fBioperm\fP() устанавливает биты прав доступа вызывающего процесса к порту
ввода\-вывода \fInum\fP, начиная с адреса порта \fIfrom\fP до значения
\fIturn_on\fP. Если \fIturn_on\fP не равно 0, вызывающий процесс должен быть
привилегированным (\fBCAP_SYS_RAWIO\fP).

.\" FIXME is the following ("Only the first 0x3ff I/O ports can be
.\" specified in this manner") still true?  Looking at changes in
.\" include/asm-i386/processor.h between 2.4 and 2.6 suggests
.\" that the limit is different in 2.6.
Можно задать права доступа только к первым 0x3ff портам ввода\-вывода. Для
работы с другими портами необходимо использовать системный вызов \fBiopl\fP(2).

Права не наследуются при вызове \fBfork\fP(2); права сохраняются при вызове
\fBexecve\fP(2); это можно использовать для предоставления доступа к портам
ввода\-вывода непривилегированным программам.

Данный вызов, в основном, предназначен для архитектуры i386. На большинстве
других архитектур он не существует или будет возвращать ошибку.
.SH "ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ"
При успешном выполнении возвращается 0. В случае ошибки возвращается \-1, а
\fIerrno\fP устанавливается в соответствующее значение.
.SH ОШИБКИ
.TP 
\fBEINVAL\fP
Неверные значения \fIfrom\fP или \fInum\fP.
.TP 
\fBEIO\fP
(на PowerPC) Этот системный вызов не поддерживается.
.TP 
\fBENOMEM\fP
.\" Could not allocate I/O bitmap.
Не хватает памяти.
.TP 
\fBEPERM\fP
Вызывающий процесс не имеет достаточно прав.
.SH "СООТВЕТСТВИЕ СТАНДАРТАМ"
Вызов \fBioperm\fP() есть только в Linux. Он не должен использоваться в
переносимых программах.
.SH ЗАМЕЧАНИЯ
В libc5 данный вызов считается системным и имеет прототип в
\fI<unistd.h>\fP. В glibc1 этого прототипа нет. В glibc2 в
\fI<sys/io.h>\fP и в \fI<sys/perm.h>\fP этот прототип есть. Не
используйте последний вариант, он существует только для i386.
.SH "СМОТРИТЕ ТАКЖЕ"
\fBiopl\fP(2), \fBcapabilities\fP(7)

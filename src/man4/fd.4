.\" t
.\" Copyright (c) 1993 Michael Haardt (michael@cantor.informatik.rwth-aachen.de)
.\" and 1994,1995 Alain Knaff (Alain.Knaff@imag.fr)
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111,
.\" USA.
.\"
.\" Modified, Sun Feb 26 15:00:02 1995, faith@cs.unc.edu
.\"
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH FD 4 2010\-08\-29 Linux "Руководство программиста Linux"
.SH ИМЯ
fd \- устройство для работы с дисководом
.SH НАСТРОЙКА
Дисководы гибких дисков \(em это блочные устройства со старшим номером
2. Обычно их владельцем является \fIroot.floppy\fP (т.е. пользователь root,
группа floppy), а права доступа к ним \(em 0660 (доступно членам группы) или
0666 (доступно всем). Младшим номером определяется тип устройства, номер
устройства и номер контроллера. Для каждого типа устройства, то есть
комбинации объёма и количества дорожек, существует базовый младший номер. К
этому базовому номеру прибавьте номер устройства в пределах его контроллера
и ещё 128, если дисковод подключен к вторичному контроллеру. В нижеследующих
таблицах \fIn\fP означает номер дисковода.
.PP
\fBПредупреждение: Если вы используете формат дискет с большим числом
дорожек, чем поддерживает ваш дисковод, вы можете вызвать механическое
повреждение.\fP Однократная попытка поработать с числом дорожек больше обычных
40/80, не должна его повредить, но нет гарантии, что этого не
произойдет. Если вы не уверены, не создавайте устройства для таких форматов,
чтобы предотвратить их использование.
.PP
Файлы устройств, не зависящие от дисковода, которые автоматически определяют
формат носителя и ёмкость диска:
.TS
l l.
Имя	Базовый младший #
_
\fBfd\fP\fIn\fP	0
.TE
.PP
Файлы устройств с носителями 5.25 дюймов с двойной плотностью:
.TS
lw(1i) l l l l l.
Имя	Ёмк.	Цил.	Сек.	Головок	Базовый младший #
_
\fBfd\fP\fIn\fP\fBd360\fP	360K	40	9	2	4
.TE
.PP
Файлы устройств с носителями 5.25 дюймов повышенной плотности:
.TS
lw(1i) l l l l l.
Имя	Ёмк.	Цил.	Сек.	Головок	Базовый младший #
_
\fBfd\fP\fIn\fP\fBh360\fP	360K	40	9	2	20
\fBfd\fP\fIn\fP\fBh410\fP	410K	41	10	2	48
\fBfd\fP\fIn\fP\fBh420\fP	420K	42	10	2	64
\fBfd\fP\fIn\fP\fBh720\fP	720K	80	9	2	24
\fBfd\fP\fIn\fP\fBh880\fP	880K	80	11	2	80
\fBfd\fP\fIn\fP\fBh1200\fP	1200K	80	15	2	8
\fBfd\fP\fIn\fP\fBh1440\fP	1440K	80	18	2	40
\fBfd\fP\fIn\fP\fBh1476\fP	1476K	82	18	2	56
\fBfd\fP\fIn\fP\fBh1494\fP	1494K	83	18	2	72
\fBfd\fP\fIn\fP\fBh1600\fP	1600K	80	20	2	92
.TE
.PP
Файлы устройств с носителями 3.5 дюймов с двойной плотностью:
.TS
lw(1i) l l l l l.
Имя	Ёмк.	Цил.	Сек.	Головок	Базовый младший #
_
\fBfd\fP\fIn\fP\fBD360\fP	360K	80	9	1	12
\fBfd\fP\fIn\fP\fBD720\fP	720K	80	9	2	16
\fBfd\fP\fIn\fP\fBD800\fP	800K	80	10	2	120
\fBfd\fP\fIn\fP\fBD1040\fP	1040K	80	13	2	84
\fBfd\fP\fIn\fP\fBD1120\fP	1120K	80	14	2	88
.TE
.PP
Файлы устройств с носителями 3.5 дюймов повышенной плотности:
.TS
lw(1i) l l l l l.
Имя	Ёмк.	Цил.	Сек.	Головок	Базовый младший #
_
\fBfd\fP\fIn\fP\fBH360\fP	360K	40	9	2	12
\fBfd\fP\fIn\fP\fBH720\fP	720K	80	9	2	16
\fBfd\fP\fIn\fP\fBH820\fP	820K	82	10	2	52
\fBfd\fP\fIn\fP\fBH830\fP	830K	83	10	2	68
\fBfd\fP\fIn\fP\fBH1440\fP	1440K	80	18	2	28
\fBfd\fP\fIn\fP\fBH1600\fP	1600K	80	20	2	124
\fBfd\fP\fIn\fP\fBH1680\fP	1680K	80	21	2	44
\fBfd\fP\fIn\fP\fBH1722\fP	1722K	82	21	2	60
\fBfd\fP\fIn\fP\fBH1743\fP	1743K	83	21	2	76
\fBfd\fP\fIn\fP\fBH1760\fP	1760K	80	22	2	96
\fBfd\fP\fIn\fP\fBH1840\fP	1840K	80	23	2	116
\fBfd\fP\fIn\fP\fBH1920\fP	1920K	80	24	2	100
.TE
.PP
Файлы устройств 3.5 дюймов с дополнительной плотностью:
.TS
lw(1i) l l l l l.
Имя	Ёмк.	Цил.	Сек.	Головок	Базовый младший #
_
\fBfd\fP\fIn\fP\fBE2880\fP	2880K	80	36	2	32
\fBfd\fP\fIn\fP\fBCompaQ\fP	2880K	80	36	2	36
\fBfd\fP\fIn\fP\fBE3200\fP	3200K	80	40	2	104
\fBfd\fP\fIn\fP\fBE3520\fP	3520K	80	44	2	108
\fBfd\fP\fIn\fP\fBE3840\fP	3840K	80	48	2	112
.TE
.SH ОПИСАНИЕ
Специальные файлы \fBfd\fP обеспечивают доступ к дисководам в режиме без
обработки (raw mode). Устройства \fBfd\fP поддерживают следующие вызовы
\fBioctl\fP(2):
.IP \fBFDCLRPRM\fP
Очищает информацию о носителе в дисководе (геометрию диска в дисководе).
.IP \fBFDSETPRM\fP
Устанавливает информацию о носителе в дисководе. Информация о носителе
потеряется, когда носитель будет сменён.
.IP \fBFDDEFPRM\fP
Устанавливает информацию о носителе в дисководе (геометрию диска в
дисководе). Информация о носителе не будет потеряна, когда носитель будет
сменён. При этом автоопределение носителя будет выключено. Чтобы снова его
включить, выполните \fBFDCLRPRM\fP.
.IP \fBFDGETDRVTYP\fP
Возвращает тип дисковода (параметр имени). Для форматов, работающих на
нескольких типах дисководов, \fBFDGETDRVTYP\fP возвращает имя, соответствующее
самому старому типу дисковода, который поддерживает данный формат.
.IP \fBFDFLUSH\fP
Объявляет недействительными данные буферного кэша указанного привода.
.IP \fBFDSETMAXERRS\fP
Устанавливает пороговые значения для сообщения об ошибках, остановки
действий, перекалибровки, сброса в начальное состояние и посекторного
чтения.
.IP \fBFDSETMAXERRS\fP
Возвращает текущие пороговые значения для ошибок.
.IP \fBFDGETDRVTYP\fP
Возвращает внутреннее имя дисковода.
.IP \fBFDWERRORCLR\fP
Очищает статистику ошибок записи.
.IP \fBFDWERRORGET\fP
Читает статистику ошибок записи. Она включает общее число ошибок записи,
расположение и диск, на котором произошла первая ошибка записи, и
расположение и диск, на котором произошла последняя ошибка записи. Диски
обозначаются генерирующимся числом, которое увеличивается на единицу при
(почти) каждой смене диска.
.IP \fBFDTWADDLE\fP
Выключает на несколько микросекунд мотор привода. Это может быть необходимо
для получения доступа к диску, чьи сектора располагаются слишком близко друг
к другу.
.IP \fBFDSETDRVPRM\fP
Устанавливает различные параметры дисковода.
.IP \fBFDGETDRVPRM\fP
Возвращает различные параметры.
.IP \fBFDGETDRVSTAT\fP
Возвращает кэшированное состояние дисковода (диск сменён, защищён от записи
и т. д.)
.IP \fBFDPOLLDRVSTAT\fP
Обращается к дисководу и возвращает его состояние.
.IP \fBFDGETFDCSTAT\fP
Возвращает состояние контроллера дисководов.
.IP \fBFDRESET\fP
Сбрасывает в начальное состояние контроллер дисководов при определённых
условиях.
.IP \fBFDRAWCMD\fP
Посылает команду в необработанном виде (raw command) контроллеру дисководов.
.PP
За более точной информацией обратитесь также к файлам
\fI<linux/fd.h>\fP и \fI<linux/fdreg.h>\fP, а также к справочной
странице \fBfloppycontrol\fP(1).
.SH ФАЙЛЫ
/dev/fd*
.SH ЗАМЕЧАНИЯ
Разные форматы позволяют читать и записывать многие типы дисков. Однако,
если дискета отформатирована со слишком маленьким межсекторным промежутком,
производительность может снизиться вплоть до того, что для доступа к дорожке
может понадобиться несколько секунд. Во избежание этого, используйте
перемежающиеся (interleaved) форматы.

Невозможно прочитать дискеты, отформатированные с использованием GCR
(групповая запись кодов), которые используются компьютерами Apple II и
Macintosh (диски 800k).

.\" .SH AUTHORS
.\" Alain Knaff (Alain.Knaff@imag.fr), David Niemi
.\" (niemidc@clark.net), Bill Broadhurst (bbroad@netcom.com).
Чтение аппаратно размеченных на секторы дискет (с отверстием на каждый
сектор и слегка повернутым индексным отверстием) не поддерживается. Такими
были старые 8\-дюймовые дискеты.
.SH "СМОТРИТЕ ТАКЖЕ"
\fBchown\fP(1), \fBfloppycontrol\fP(1), \fBgetfdprm\fP(1), \fBmknod\fP(1),
\fBsuperformat\fP(1), \fBmount\fP(8), \fBsetfdprm\fP(8)

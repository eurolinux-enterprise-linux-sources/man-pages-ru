'\" t
.\" Copyright (c) 1993 Michael Haardt (michael@cantor.informatik.rwth-aachen.de)
.\" and 1994,1995 Alain Knaff (Alain.Knaff@imag.fr)
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111,
.\" USA.
.\"
.\" Modified, Sun Feb 26 15:00:02 1995, faith@cs.unc.edu
.\"
.\" Перевод на русский язык: Антон Лыков (last@last.ulsu.ru) 20001203
.TH FD 4 "29 января 1995" "Linux" "Специальные файлы"
.SH ИМЯ
fd \- дисковод
.SH КОНФИГУРАЦИЯ
Дисководы - блочные устройства со старшим номером 2.  Обычно их
владельцем является root.floppy (т. е. пользователь root, группа
floppy), а права доступа к ним -- 0660 (доступно членам группы) или 0666
(доступно всем). Младший
номер определяется типом устройства, номером устройства, и номером контроллера.
Для каждого типа устройства, то есть комбинации объема и количества дорожек,
существует базовый младший номер.  К этому базовому номеру прибавьте номер
устройства в пределах его контроллера, и еще 128, если дисковод подключен к
вторичному контроллеру.  В нижеследующих таблицах
.I n
означает номер дисковода.
.PP
\fBПредупреждение: Если вы используете формат дискет с большим числом дорожек,
чем поддерживает ваш дисковод, вы можете вызвать механическое повреждение.\fP
Однажды попробовав работать с числом дорожек больше обычных 40/80, вы не должны
его испортить, но нет гарантии, что этого не произойдет.  Не создавайте устройства
для таких форматов, чтобы предотвратить их использование, если вы не уверены.
.PP
Файлы устройств, не зависящие от привода, которые автоматически определяют
формат и емкость диска:
.PP
.TS
l l.
Имя	Базовый младший #
_
\fBfd\fP\fIn\fP	0
.TE
.PP
Файлы устройств 5.25 дюймов с двойной плотностью:
.PP
.TS
lw(1i) l l l l l.
Имя	Объем 	Дор.	Сект.	Голов.	Базовый младший #
_
\fBfd\fP\fIn\fP\fBd360\fP	360K	40	9	2	4
.TE
.PP
Файлы устройств 5.25 дюймов с высокой плотностью:
.PP
.TS
lw(1i) l l l l l.
Имя	Объем 	Дор.	Сект.	Голов.	Базовый младший #
_
\fBfd\fP\fIn\fP\fBh360\fP	360K	40	9	2	20
\fBfd\fP\fIn\fP\fBh410\fP	410K	41	10	2	48
\fBfd\fP\fIn\fP\fBh420\fP	420K	42	10	2	64
\fBfd\fP\fIn\fP\fBh720\fP	720K	80	9	2	24
\fBfd\fP\fIn\fP\fBh880\fP	880K	80	11	2	80
\fBfd\fP\fIn\fP\fBh1200\fP	1200K	80	15	2	8
\fBfd\fP\fIn\fP\fBh1440\fP	1440K	80	18	2	40
\fBfd\fP\fIn\fP\fBh1476\fP	1476K	82	18	2	56
\fBfd\fP\fIn\fP\fBh1494\fP	1494K	83	18	2	72
\fBfd\fP\fIn\fP\fBh1600\fP	1600K	80	20	2	92
.TE
.PP
Файлы устройств 3.5 дюймов с двойной плотностью:
.PP
.TS
lw(1i) l l l l l.
Имя	Объем 	Дор.	Сект.	Голов.	Базовый младший #
_
\fBfd\fP\fIn\fP\fBD360\fP	360K	80	9	1	12
\fBfd\fP\fIn\fP\fBD720\fP	720K	80	9	2	16
\fBfd\fP\fIn\fP\fBD800\fP	800K	80	10	2	120
\fBfd\fP\fIn\fP\fBD1040\fP	1040K	80	13	2	84
\fBfd\fP\fIn\fP\fBD1120\fP	1120K	80	14	2	88
.TE
.PP
Файлы устройств 3.5 дюймов с высокой плотностью:
.PP
.TS
lw(1i) l l l l l.
Имя	Объем 	Дор.	Сект.	Голов.	Базовый младший #
_
\fBfd\fP\fIn\fP\fBH360\fP	360K	40	9	2	12
\fBfd\fP\fIn\fP\fBH720\fP	720K	80	9	2	16
\fBfd\fP\fIn\fP\fBH820\fP	820K	82	10	2	52
\fBfd\fP\fIn\fP\fBH830\fP	830K	83	10	2	68
\fBfd\fP\fIn\fP\fBH1440\fP	1440K	80	18	2	28
\fBfd\fP\fIn\fP\fBH1600\fP	1600K	80	20	2	124
\fBfd\fP\fIn\fP\fBH1680\fP	1680K	80	21	2	44
\fBfd\fP\fIn\fP\fBH1722\fP	1722K	82	21	2	60
\fBfd\fP\fIn\fP\fBH1743\fP	1743K	83	21	2	76
\fBfd\fP\fIn\fP\fBH1760\fP	1760K	80	22	2	96
\fBfd\fP\fIn\fP\fBH1840\fP	1840K	80	23	2	116
\fBfd\fP\fIn\fP\fBH1920\fP	1920K	80	24	2	100
.TE
.PP
Файлы устройств 3.5 дюймов с дополнительной плотностью:
.PP
.TS
lw(1i) l l l l l.
Имя	Объем 	Дор.	Сект.	Голов.	Базовый младший #
_
\fBfd\fP\fIn\fP\fBE2880\fP	2880K	80	36	2	32
\fBfd\fP\fIn\fP\fBCompaQ\fP	2880K	80	36	2	36
\fBfd\fP\fIn\fP\fBE3200\fP	3200K	80	40	2	104
\fBfd\fP\fIn\fP\fBE3520\fP	3520K	80	44	2	108
\fBfd\fP\fIn\fP\fBE3840\fP	3840K	80	48	2	112
.TE
.SH ОПИСАНИЕ
Специальные файлы \fBfd\fP имеют доступ к дисководам в "сыром" виде (raw mode).
Следующие вызовы
.BR ioctl (2)
поддерживаются устройствами \fBfd\fP:
.IP \fBFDCLRPRM\fP
очищает информацию о носителе для устройства (геометрию диска в приводе).
.IP \fBFDSETPRM\fP
устанавливает информацию о носителе в устройстве. Информация о носителе потеряется,
когда носитель будет сменен.
.IP \fBFDDEFPRM\fP
устанавливает информацию о носителе в устройстве (геометрию диска в приводе).
Информация о носителе не будет потеряна, когда носитель будет сменен.
При этом автоопределение носителя будет запрещено.
Чтобы снова его разрешить, обратитесь к \fBFDCLRPRM\fP .
.IP \fBFDGETDRVTYP\fP
возвращает тип дисковода (параметр имени).  Для форматов, работающих
на нескольких типах дисководов, \fBFDGETDRVTYP\fP возвращает имя, которое
соответствует самому старому типу дисковода, который поддерживает данный формат.
.IP \fBFDFLUSH\fP
отменяет использование текущих данных кэша для данного диска.
.IP \fBFDSETMAXERRS\fP
устанавливает пороговые значения для сообщения об ошибках, остановки
действий, перекалибровки, сброса в начальное состояние и посекторного
чтения.
.IP \fBFDSETMAXERRS\fP
возвращает текущие пороговые значения для ошибок.
.IP \fBFDGETDRVTYP\fP
возвращает внутреннее имя привода.
.IP \fBFDWERRORCLR\fP
очищает статистику ошибок записи.
.IP \fBFDWERRORGET\fP
читает статистику ошибок записи. Она включает общее число
ошибок записи, расположение и диск, на котором произошла первая ошибка записи и
расположение и диск, на котором произошла последняя ошибка записи. Диски обозначаются
генерирующимся числом, которое увеличивается на единицу при (почти) каждой смене диска.
.IP \fBFDTWADDLE\fP
Выключить на несколько микросекунд мотор привода. Это может быть
необходимо для получения доступа к диску, чьи сектора располагаются слишком близко друг к другу.
.IP \fBFDSETDRVPRM\fP
устанавливает различные параметры дисковода.
.IP \fBFDGETDRVPRM\fP
возвращает эти параметры.
.IP \fBFDGETDRVSTAT\fP
возвращает кэшированное состояние дисковода (диск сменен, защищен от
записи и т. д.)
.IP \fBFDPOLLDRVSTAT\fP
обращается к диску и возвращает состояние дисковода.
.IP \fBFDGETFDCSTAT\fP
возвращает состояние контроллера гибких дисков.
.IP \fBFDRESET\fP
сбрасывает в начальное состояние контроллер гибких дисков при определенных условиях.
.IP \fBFDRAWCMD\fP
посылает команду в "сыром" виде (raw command) контроллеру гибких дисков.
.PP
Для более точной информации обратитесь также к include-файлам <linux/fd.h> и
<linux/fdreg.h>, а также к странице руководства для
floppycontrol.
.SH ПРИМЕЧАНИЕ
Разные форматы позволяют читать и записывать многие типы дисков.
Однако, если дискета отформатирована со слишком маленьким межсекторным промежутком,
производительность может снизиться вплоть до того, что для доступа к дорожке может понадобиться до нескольких секунд.
Во избежание этого, используйте перемежающий (interleaved) формат. Невозможно
прочитать дискеты, отформатированные с использованием GCR (групповая запись кодов),
которые используются компьютерами Apple II и Macintosh (диски 800k).
Чтение аппаратно размеченных на секторы дискет (с отверстием на каждый сектор и
слегка повернутым индексным отверстием) не поддерживается.  Такими
были старые 8-дюймовые дискеты.
.SH ФАЙЛЫ
/dev/fd*
.SH АВТОРЫ
Alain Knaff (Alain.Knaff@imag.fr), David Niemi
(niemidc@clark.net), Bill Broadhurst (bbroad@netcom.com).
.SH "СМОТРИ ТАКЖЕ"
.BR floppycontrol (1),
.BR mknod (1),
.BR chown (1),
.BR getfdprm (1),
.BR superformat (1),
.BR mount (8),
.BR setfdprm (8)

.\" Copyright (c) 1993 Michael Haardt (michael@moria.de), Fri Apr  2 11:32:09 MET DST 1993
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111,
.\" USA.
.\"
.\" Modified Sun Jul 25 10:46:28 1993 by Rik Faith (faith@cs.unc.edu)
.\" Modified Sun Aug 21 18:12:27 1994 by Rik Faith (faith@cs.unc.edu)
.\" Modified Sun Jun 18 01:53:57 1995 by Andries Brouwer (aeb@cwi.nl)
.\" Modified Mon Jan  5 20:24:40 MET 1998 by Michael Haardt
.\"  (michael@cantor.informatik.rwth-aachen.de)
.\"
.\" Дата последней коррекции перевода 08.03.2004
.\" Перевод с английского сделал Виктор Вислобоков <corochoone@perm.ru>
.\" http://www.linuxshare.ru/projects/man/
.\"
.TH PASSWD 5 1998-01-05 "Форматы файлов" "Руководство программиста Linux"
.SH ИМЯ
passwd \- файл паролей
.SH ОПИСАНИЕ
.B Passwd
является текстовым файлом, который содержит список учётных записей в
системе, где каждая учётная запись содержит некоторую полезную информацию,
такую как идентификатор пользователя (UID), идентификатор группы (GID),
домашний каталог, командный интерпретатор и т.д.
Часто, в этом же файле для каждой учётной записи содержатся также и
зашифрованные пароли. Файл должен быть доступен для чтения всем (многие
утилиты, такие как
.BR ls (1)
используют его, чтобы отражать идентифкаторы пользователей на их
имена), но доступ на запись должен предоставляться только
суперпользователю.
.PP
В старые добрые времена, не существовало большой проблемы, связанной
с доступностью этого файла на чтение для всех. Любой мог прочитать
зашифрованные пароли, но мощности компьютеров не хватало для подбора
грамотно выбранных паролей, а кроме того, основным принципом работы
было дружественное сообщество пользователей. В наши дни, многие
пользователи стали использовать механизм "теневых" паролей, где файл
.I /etc/passwd
содержит * вместо зашифрованных паролей, а зашифрованные пароли
хранятся в файле
.I /etc/shadow ,
который доступен на чтение только суперпользователю.
.PP
Вне зависимости от того применяется ли механизм теневых паролей
или нет, многие системные администраторы ставят звёздочку в
поле зашифрованного пароля, чтобы быть уверенными, что данный
пользователь не пройдёт авторизацию, используя какой-либо пароль.
(Но смотри секцию Замечение ниже.)
.PP
Если вы создаёте новую учётную запись, сперва в поле пароля помещается
звёздочка, а затем с помощью команды
.BR passwd (1)
вы можете задать пароль.
.PP
Каждая строка файла содержит только одну учётную запись в формате:
.sp
.RS
account:password:UID:GID:GECOS:directory:shell
.RE
.sp
Вот описание этих полей:
.sp
.RS
.TP 1.0in
.I account
имя пользователя в системе. Оно не должно содержать денежных символов.
(Вообще сегодня в Linux имя пользователя может содержать только
латинские буквы в нижнем регистре и ряд служебных символов -- прим.пер.)
.TP
.I password
зашифрованный пароль пользователя или звёздочка. (В случае использования
теневых паролей, если пароль задан, то в поле пароля ставится символ `x',
а не звёздночка -- прим.пер.)
.TP
.I UID
числовой идентификатор пользователя (UID).
.TP
.I GID
числовой идентификатор первичной группы (GID) для этого пользователя.
.TP
.I GECOS
Данное поле является необязательным и используется только для
информационных целей. Обычно, оно содержит полное имя пользователя.
GECOS это аббревиатура от General Electric Comprehensive Operating System,
которая был переименована в GCOS, когда подразделение больших систем
компании GE было продано компании Honeywell. Денис Ритчи писал:
"Иногда мы направляем вывод печати или пачку заданий на GCOS машину.
Поле gcos в файле паролей было местом, где хранилась информация для
$IDENTcard.  Не элегантно."
.TP
.I directory
домашний каталог пользователя $HOME.
.TP
.I shell
это программа, которая запускается после входа в систему (если это
поле пустое, то используется
.BR /bin/sh ).
Если в поле указан не существующий файл, то пользователь не сможет
войти в систему с помощью
.BR login (1).
.RE
.SH ЗАМЕЧАНИЕ
Если вы хотите создать пользователя в определённой группе, то вы должны
указать имя группы или её GID, и при этом для этой группы в файле
\fI/etc/group\fP должна существовать соответствующая запись.
.PP
Если зашифрованный пароль установлен в звёздочку, то пользователь
не сможет войти в систему, используя команду
.BR login (1),
но сможет войти в систему, используя
.BR rlogin (1),
запустить существующие процессы и инициировать новые, используя
.BR rsh (1),
.BR cron (1),
.BR at (1),
или почтовые фильтры и т.д.  Попытка заблокировать учётную запись
простым изменением поля \fIshell\fP, даст тот же результат и в
дополнении разрешит использование
.BR su (1).
.SH ФАЙЛЫ
.I /etc/passwd
.SH "СМОТРИ ТАКЖЕ"
.BR passwd (1),
.BR login (1),
.BR su (1),
.BR group (5),
.BR shadow (5)
.SH ПЕРЕВОД
Перевёл с английского Виктор Вислобоков <corochoone@perm.ru> 2004

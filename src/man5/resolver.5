.\" Copyright (c) 1986 The Regents of the University of California.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms are permitted
.\" provided that the above copyright notice and this paragraph are
.\" duplicated in all such forms and that any documentation,
.\" advertising materials, and other materials related to such
.\" distribution and use acknowledge that the software was developed
.\" by the University of California, Berkeley.  The name of the
.\" University may not be used to endorse or promote products derived
.\" from this software without specific prior written permission.
.\" THIS SOFTWARE IS PROVIDED ``AS IS'' AND WITHOUT ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED
.\" WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
.\"
.\"	@(#)resolver.5	5.9 (Berkeley) 12/14/89
.\"	$Id: resolver.5,v 1.2 2001/02/04 17:49:11 alexm Exp $
.\"
.\" Дата последней коррекции перевода 22.11.2000
.\" Перевод с английского выполнил Виктор Вислобоков <victor_v@permonline.ru>
.\" http://linux.perm.ru/projects/trans/man/
.TH RESOLVER 5 "11 Ноября, 1993 года"
.UC 4
.SH ИМЯ
resolver \- файл с настройками для резолвера
.SH ОБЗОР
/etc/resolv.conf
.SH ОПИСАНИЕ
.LP
.IR Резолвер -- 
это набор подпрограмм в библиотеке C, которые предоставляют доступ к
Internel DNS (Domain Name System) (Системе Доменных Имен Интернет) (прим. пер. -- DNS
обеспечивает возможность преобразования символьных имен машин в
IP-адреса и наоборот, IP-адресов в символьные имена).
Файл с настройками для резолвера содержит
информацию, которую первым делом читают подпрограммы резолвера, вызванные
каким-либо процессом. Данный файл устроен так, чтобы его мог читать человек
и содержит список ключевых слов и значений, которые предоставляют
резолверу различную информацию.
.LP
В нормально настроенной системе данный файл не нужен: запросы будут
обрабатываться сервером на локальном хосте, имя домена определяется
из имени машины, а путь поиска машины по домену конструируется из имени
домена.
.LP
Вот разные параметры конфигурации:
.TP
\fBnameserver\fP
адрес сервера имен в Интернет (в нотации xxx.xxx.xxx.xxx), который будет
обрабатывать запросы от резолвера.  Серверов имен может быть максимум MAXNS
(в данный момент\ -- 3), по одному на каждой строке.  Если задано несколько
серверов, то библиотека резолвера опрашивает их в порядке перечисления.
Если записей \fBnameserver\fP нет, то по умолчанию используется сервер
имен на локальной машине. (Используемый алгоритм пытается подключиться
к серверу имен и, если запрос не был обработан через некоторый промежуток
времени, делается попытка подключиться к следующему серверу имен, и
так до тех пор пока не будет обработан весь список серверов, затем
повторить процедуру, пока не будет достигнуто максимальное количество
повторов).
.TP
\fBdomain\fP
Локальное имя домена.
Большинство запросов на имена машин в этом домене смогут использовать
лишь краткие имена, без указания имени домена.  Если записей \fBdomain\fP
нет, то домен определяется из имени локальной машины, которое
возвращается функцией
\fIgethostname\fP\|();
доменной частью имени считается все, что следует после первой точки `.'.
Наконец, если имя машины не содержит доменной части, назначается
корневой домен.
.TP
\fBsearch\fP
Список для поиска имен машин.
Список обычно определяется из локального имени домена; по умолчанию он
содержит только имя локального домена. В списке может быть задано
несколько доменов, которые должны следовать за ключевым словом
\fIsearch\fP и отделяться друг от друга пробелами или табуляциями.
В большинстве случаев, если в запросе к резолверу задано короткое имя машины
(без доменной части), то к нему будет поочередно добавляться каждый
домен из заданного списка, пока не будет найдено полное совпадающее имя машины.
Заметим, что данный процесс может быть медленным, и станет генерировать ощутимый
сетевой траффик, если серверы, обслуживающие перечисленные в списке
домены, не являются локальными, а также что запросы вернут ошибку
тайм-аута, если сервер для одного из доменов недоступен.
.IP
Список в данный момент ограничен шестью доменами, общая длина имен которых не
должна превышать 256 символов.
.TP
\fBsortlist\fP
Разрешает сортировку адресов, которые возвращаются вызовом
.IR gethostbyname() .
Опция sortlist задается с помощью пары: IP адрес/маска сети. Маска сети
является необязательной, по умолчанию используется текущая маска сети.
Пары из IP-адреса и необязательной маски сети разделяются прямой косой
чертой. Может быть задано до 10 пар.
.IP
пример: sortlist 130.155.160.0/255.255.240.0 130.155.0.0
.TP
\fBoptions\fP
Данная опция разрешает изменение определенных переменных резолвера.
Синтаксис такой:
.IP
\fBoptions\fP \fIопция\fP \fI...\fP
.IP
где \fIопция\fP может принимать одно из следующих значений:
.IP
\fBdebug\fP \(em устанавливает RES_DEBUG в _res.options.
.IP
\fBndots:\fP\fIn\fP \(em устанавливает порог для количества точек, которое
должно быть в имени, заданном в \fBres_query\fP (см. \fIresolver\fP(@LIB_NETWORK_EXT@))
перед тем как будет создан \fIначальный абсолютный запрос (initial absolute
query)\fP. По умолчанию, \fIn\fP ``1'', означает, что если в имени есть
хоть одна точка, будет попытка считать это имя абсолютным перед
добавлением к нему элементов из списка \fIsearch\fP.
.LP
Ключевые слова \fIdomain\fP и \fIsearch\fP являются взаимно исключающими.
Если эти слова заданы оба, то будет работать то, которое задано последним.
.LP
Ключевое слово \fIsearch\fP в файле \fIresolv.conf\fP может быть перекрыто,
если переменная окружения ``\s-1LOCALDOMAIN\s+1'' содержит список доменов,
разделенных пробелами.
.LP
Ключевое слово \fIoptions\fP в файле \fIresolv.conf\fP может быть дополнено,
если переменная окружения ``\s-1RES_OPTIONS\s+1'' будет содержать список
вышеописанных опций резолвера.
.LP
Ключевое слово и значение должны быть в одной строке, и кроме того, ключевое
слово (например, \fBnameserver\fP), должно быть первым в строке. Значение
должно отделяться от ключевого слова пробелом.
.SH ФАЙЛЫ
.I /etc/resolv.conf
.SH СМОТРИ ТАКЖЕ
.BR gethostbyname (3),
.BR hostname (7),
.BR named (8),
.br
Name Server Operations Guide for BIND (Руководство по Серверу Имен для BIND)

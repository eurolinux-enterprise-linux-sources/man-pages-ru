.\" Hey Emacs! This file is -*- nroff -*- source.
.\"
.\" This manpage is Copyright (C) 1996 Austin Donnelly <and1000@cam.ac.uk>,
.\"  with additional material (c) 1995 Martin Schulze <joey@infodrom.north.de>
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one
.\" 
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\" 
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\"
.\"   This manpage was made by merging two independently written manpages,
.\"   one written by Martin Schulze (18 Oct 95), the other written by
.\"   Austin Donnelly, (9 Jan 96).
.\"
.\" Thu Jan 11 12:14:41 1996 Austin Donnelly  <and1000@cam.ac.uk>
.\"   * Merged two services(5) manpages
.\"
.\" Вычитано и скорректировано by alexm@hsys.msk.ru для проекта
.\" http://alexm.here.ru/manpages-ru/
.\"
.TH SERVICES 5 "11 января 1996" "Linux" "Руководство программиста Linux"
.SH НАЗВАНИЕ
services \- список служб сети Internet
.SH ОПИСАНИЕ
.B services
\- это простой ASCII-файл, сопоставляющий текстовые имена
служб internet и назначенные им номера портов и типы протоколов.
Каждая программа, работающая с сетью, должна обращаться к этому файлу,
чтобы узнать номер
порта (и протокол) для своей услуги.
Библиотека языка C поддерживает обращения к этому файлу из других
программ с помощью функций
.BR getservent (3),
.BR getservbyname (3),
.BR getservbyport (3),
.BR setservent (3),
и
.BR endservent (3).

Номера портов назначаются IANA (Internet Assigned Numbers Authority),
и в настоящий момент они взяли за правило назначать номера сразу
обоим протоколам, TCP и UDP.  Поэтому большинство назначений имеют
две записи, даже для служб, которые работают только по TCP.

Номера портов, лежащих ниже 1024 (также называемых 'нижние (low numbered)' порты)
могут использоваться только пользователем root (смотри
.BR bind "(2), " tcp "(7), и " udp "(7).)"
Это сделано для того, чтобы клиенты, подключившиеся к нижнему порту,
могли быть уверены, что на этом порту работает стандартный сервис,
установленный администратором, а не какая-нибудь странная программа,
запущенная обычным пользователем.  Хорошо известные номера портов,
регистрируемые в IANA, обычно располагаются в этом доступном только
для администратора промежутке.

Наличие записи о службе в файле
.B services
необязательно означает, что такая служба запущена на машине. Смотрите файл
.BR inetd.conf "(5)",
в котором настраиваются предоставляемые Internet-службы.  Заметьте, что не все
сетевые службы запускаются с помощью
.BR inetd "(8), "
и поэтому их может не быть в
.BR inetd.conf "(5). "
В частности, news- (NNTP) и mail- (SMTP) сервера часто запускаются из
скриптов загрузки системы.

Местоположение файла
.B services
определяется в
.IR /usr/include/netdb.h
макропеременной
.BR _PATH_SERVICES .
Обычно она устанавливается в
.IR /etc/services "."

Каждая строка описывает одну службу; она выглядит так:
.IP
\f2имя-службы\ \ \ порт\f3/\f2протокол\ \ \ \f1[\f2псевдонимы ...\f1]
.TP
где:
.TP 10
.I имя-службы
определяет читабельное имя службы, которое используется при поиске
этой службы в этом файле.  Регистр букв в имени важен.
Часто клиентскую программу называют по
.IR имени-службы "."
.TP
.I порт
определяет номер порта (десятичное число), которое используется для этой
службы.
.TP
.I протокол
устанавливает тип используемого протокола. Это поле должно соответствовать
одной из записей в файле
.BR protocols "(5)."
Обычно здесь указываются значения
.B tcp
и
.BR udp "."
.TP
.I псевдонимы
необязательный список других имён этой службы, разделённых
пробелом или символом табуляции (обязательно посмотрите
нижеприведенный раздел ОШИБКИ РЕАЛИЗАЦИИ).  Опять же, регистр букв в
имени важен.
.PP

Для разделения полей могут использоваться пробелы или символы табуляции.

Комментарии начинаются со знака диеза (#) и продолжаются до конца
строки. Пустые строки игнорируются.

.I Имя-службы
должно стоять в самом начале строки, так как стоящие перед ним пробелы обрезаться
не будут.
.I Имена-служб
могут состоять из любых печатных символов, кроме пробела и символа табуляции,
однако умеренность в выборе символов помогает уменьшить проблемы
совместимости реализаций. Например: a-z, 0-9, и дефис (\-) считаются
хорошим выбором.

Строки, не подходящие под этот формат, не должны присутствовать в файле.
(В настоящий момент они просто пропускаются функциями
.BR getservent "(3), " getservbyname "(3) и " getservbyport "(3)."
Однако на такое поведение нельзя полагаться.)

Для обратной совместимости между номером
.I порта
и именем
.I протокола
может быть косая черта (/) или запятая (,).  На современных системах
не следует использовать запятую.

Этот файл может распространяться по сети с помощью общесетевых служб имён,
типа Yellow Pages/NIS или BIND/Hesiod.

Примерный файл
.B services
может выглядеть так:
.RS
.nf
.sp
.ta 3i
netstat         15/tcp
qotd            17/tcp          quote
msp             18/tcp          # message send protocol
msp             18/udp          # message send protocol
chargen         19/tcp          ttytst source
chargen         19/udp          ttytst source
ftp             21/tcp
# 22 - unassigned
telnet          23/tcp
.sp
.fi
.RE
.SH ОШИБКИ РЕАЛИЗАЦИИ
Можно задать не более 35 альтернативных имен службы; это из-за того,
как написан код функции
.BR getservent "(3)."

Строки длиной более
.B BUFSIZ
(равной в данный момент 1024) символов будут игнорироваться функциями
.BR getservent "(3), " getservbyname "(3) и " getservbyport "(3)."
Однако, это также приводит к неправильному разбору следующей строки.
.SH ФАЙЛЫ
.TP
.I /etc/services
Список служб сети Internet
.TP
.I /usr/include/netdb.h
Определение
.B _PATH_SERVICES
.SH "СМОТРИ ТАКЖЕ"
.BR getservent (3),
.BR getservbyname (3),
.BR getservbyport (3),
.BR setservent (3),
.BR endservent (3),
.BR protocols (5),
.BR listen (2),
.BR inetd.conf (5),
.BR inetd (8).

Назначенные номера (RFC), самый новый в настоящий момент: RFC 1700, (AKA STD0002)

Руководство по службе Yellow Pages

Руководство по службе BIND/Hesiod
.SH ПЕРЕВОД
Юрий Козлов <y_kozlov@chat.ru>.
.\" man-pages-1.34
.\" 
.\" Сбт Фев 10 13:22:00 MSK 2001
.\" HomePage                         http://www.chat.ru/~y_kozlov/

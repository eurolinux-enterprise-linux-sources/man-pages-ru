.TH ZIC 8
.SH ИМЯ
zic \- компилятор часовых поясов
.SH ОБЗОР
.B zic
[
.B \-v
] [
.B \-d
.I каталог
] [
.B \-l
.I местное_время
] [
.B \-p
.I posixrules
] [
.B \-L
.I имя_файла_високосной_секунды
] [
.B \-s
] [
.B \-y
.I команда
] [
.I имя_файла
\&... ]
.SH ОПИСАНИЕ
.if t .ds lq ``
.if t .ds rq ''
.if n .ds lq \&"\"
.if n .ds rq \&"\"
.de q
\\$3\*(lq\\$1\*(rq\\$2
..
.I Zic
читает текст из файла(ов), имена которых заданы в командной строке и
преобразует их в файлы с информацией о переводе времени.
Если в качестве
.I имени_файла
указан
.BR \- ,
то для чтения используется стандартный ввод.
.PP
Возможные параметры:
.TP
.BI "\-d " каталог
Создавать файлы с информацией для перевода времени в заданном каталоге, а
не в нижеуказанном стандартном каталоге.
.TP
.BI "\-l " "часовой пояс"
Использовать заданный часовой пояс в качестве местного времени.
В этом случае
.I zic
поступит так, как если входные данные содержали строку
.sp
.ti +.5i
Link	\fIчасовой пояс\fP		localtime
.TP
.BI "\-p " "часовой пояс"
Использовать правила данного часового пояса при обработке
соответствующих переменных среды, описанных в стандарте POSIX.
В этом случае
.I zic
поступит так, как если бы входные данные содержали строку
.sp
.ti +.5i
Link	\fIчасовой пояс\fP		posixrules
.TP
.BI "\-L " имя_файла_високосной_секунды
Прочитать информацию о високосной секунде из файла с заданным именем.
Если этот параметр не используется, то в выходном файле
информация о високосной секунде не появится.
.TP
.B \-v
Информировать, если год из файла данных выходит за границы диапазона лет, 
значения которых может выдавать функция
.IR time (2).
.TP
.B \-s
Ограничить значения времени в выходных файлах рамками значений из входных
файлов, то есть оставить их какими они были \- знаковыми или беззнаковыми.
Этот параметр можно использовать для создания SVVS-совместимых файлов.
.TP
.BI "\-y " команда
Использовать заданную
.I команду
вместо
.B yearistype
при проверке типа года (смотрите ниже).
.PP
Входные строки состоят из полей.
Поля отделяются друг от друга любым числом пробельных символов.
Начальные и конечные пробелы входных строк игнорируются.
Символ диеза (#), не находящийся в кавычках, начинает комментарий, заканчивающийся
концом строки.
Символы пробела и символы диеза могут заключаться в двойные кавычки,
если их нужно использовать как часть поля.
Любая пустая строка (после удаления комментариев) игнорируется.
Непустые строки могут быть трёх типов:
строки правил, строки поясов и строки ссылок.
.PP
Строка правила имеет вид
.nf
.ti +.5i
.ta \w'Rule\0\0'u +\w'NAME\0\0'u +\w'FROM\0\0'u +\w'1973\0\0'u +\w'TYPE\0\0'u +\w'Apr\0\0'u +\w'lastSun\0\0'u +\w'2:00\0\0'u +\w'SAVE\0\0'u
.sp
Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
.sp
Например:
.ti +.5i
.sp
Rule	US	1967	1973	\-	Apr	lastSun	2:00	1:00	D
.sp
.fi
Описание полей, из которых состоит строка правила:
.TP "\w'LETTER/S'u"
.B NAME
Определяет (произвольное) имя списка правил, частью которого является данное
правило.
.TP
.B FROM
Задаёт первый год, в котором применяется данное правило.
Можно задать любое целое значение года; предполагается использование
Грегорианского календаря.
Слово
.B minimum
(или аббревиатура) означает минимальный год, который может быть задан
целым числом.
Слово
.B maximum
(или аббревиатура) означает максимальный год, который может быть задан
целым числом.
Правила могут описывать время, которое непредставимо на данной машине, 
такие времена игнорируются; это делает правила переносимыми
между машинами с различными типами значений времени.
.TP
.B TO
Задаёт последний год, в котором применяется данное правило.
Вдобавок к
.B minimum
и
.B maximum
(описанным выше),
может использоваться слово
.B only
(или аббревиатура), которое означает повторение значения из поля
.BR FROM .
.TP
.B TYPE
Задаёт тип года, в котором применяется данное правило.
Если
.B TYPE
равно
.BR \- ,
то правило применяется ко всем годам между значениями
.B FROM
и
.B TO
включительно.
Если
.B TYPE
равно чему-нибудь ещё, то для проверки типа года
.I zic
выполняет команду
.ti +.5i
\fByearistype\fP \fIгод\fP \fIтип\fP
.br
Нулевой код завершения означает, что год имеет заданный тип.
Код завершения один означает, что год не заданного типа.
.TP
.B IN
Название месяца, в котором начинает действовать правило.
Название месяца может быть аббревиатурой.
.TP
.B ON
Задаёт день, в котором начинает действовать правило.
Возможные формы записи:
.nf
.in +.5i
.sp
.ta \w'Sun<=25\0\0'u
5	пятый день месяца
lastSun	последнее воскресенье месяца
lastMon	последний понедельник месяца
Sun>=8	первое воскресенье после восьмого числа включительно
Sun<=25	последнее воскресенье перед 25-м числом включительно
.fi
.in -.5i
.sp
Названия дней недели могут быть аббревиатурой или писаться полностью.
Заметим, что в поле
.B ON
не должно быть пробелов.
.TP
.B AT
Задаёт время дня, с которого начинает действовать правило.
Возможные формы записи:
.nf
.in +.5i
.sp
.ta \w'1:28:13\0\0'u
2	время в часах
2:00	время в часах и минутах
15:00	24-часовой формат задания времени (для времени после полудня)
1:28:14	время в часах, минутах и секундах
\-	эквивалентно 0
.fi
.in -.5i
.sp
где 0 часов означает полночь и начало нового дня, а
24 часа означают полночь и конец дня.
Любая из этих форм может заканчиваться символом
.BR w ,
если это местное
.q "по настенным часам"
время,
.BR s ,
если это локальное
.q стандартное
время, или
.B u
(или
.B g
или
.BR z ),
если это универсальное(по Гринвичу) время;
при отсутствии временного индикатора предполагается, что это местное время.
.TP
.B SAVE
Задаёт количество времени, которое нужно добавить к локальному стандартному
времени при начале действия правила.
Это поле имеет тот же формат, что и поле
.B AT
(хотя, конечно, при этом суффиксы
.B w
и
.B s
не используются).
.TP
.B LETTER/S
Задаёт
.q "переменную часть"
(например,
.q S
или
.q D
в 
.q EST
или
.q EDT )
в аббревиатуре часового пояса, который используется, когда правило начинает
действовать.
Если это поле равно
.BR \- ,
то переменная часть будет пустой.
.PP
Строка часового пояса имеет вид
.sp
.nf
.ti +.5i
.ta \w'Zone\0\0'u +\w'Australia/Adelaide\0\0'u +\w'GMTOFF\0\0'u +\w'RULES/SAVE\0\0'u +\w'FORMAT\0\0'u
Zone	NAME	GMTOFF	RULES/SAVE	FORMAT	[UNTIL]
.sp
Например:
.sp
.ti +.5i
Zone	Australia/Adelaide	9:30	Aus	CST	1971 Oct 31 2:00
.sp
.fi
Описание полей, из которых состоит строка часового пояса:
.TP "\w'GMTOFF'u"
.B NAME
Название часового пояса.
Это название используется при создании файла с информацией о переводе времени для
этого пояса.
.TP
.B GMTOFF
Время, которое нужно добавить к UTC, чтобы получить стандартное
время для этого пояса.
Это поле имеет тот же формат, что и поля
.B AT
и
.B SAVE
в "Rule"-строке.
Если нужно отнять какое-то время, используйте знак минуса.
.TP
.B RULES/SAVE
Названия правила, которое используется в этом часовом поясе, или иначе говоря,
время, которое нужно добавить к локальному стандартному времени.
Если это поле равно
.BR \- ,
то в этом часовом поясе всегда используется стандартное время.
.TP
.B FORMAT
Формат аббревиатуры для данного часового пояса.
Пара символов
.B %s
задаёт
.q "переменную часть"
аббревиатуры часового пояса.
Косая черта (/) отделяет стандартную аббревиатуру и аббревиатуру
летнего времени.
.TP
.B UNTIL
Время, с которого изменяются смещение UTC или правила.
Оно задаётся годом, месяцем, днем и временем дня.
Если оно задано, то информация о часовом поясе формируется из заданного
смещения UTC и правила, подпадающего под время изменения.
Месяц, день, и время дня имеют тот же формат, что и в колонках правил IN, ON и
AT; последние колонки могут не задаваться, а по умолчанию для пропущенных
колонок действуют самые ранние их значения.
.IP
Далее должна следовать
.q дополнительная
строка; она имеет тот же формат, что и строка часового пояса, за исключением того, что
в строке пропускается
.q Zone
и название, как если бы дополнительная строка задавала информацию, начинающуюся
со времени, указанном в поле
.B UNTIL
в предыдущей строке в файле, для использования предыдущей строкой.
Дополнительные строки, как и "Zone"-строки, могут содержать поле
.BR UNTIL ,
показывающее, что следующая строка тоже является
дополнительной.
.PP
Строка ссылки имеет вид
.sp
.nf
.ti +.5i
.ta \w'Link\0\0'u +\w'Europe/Istanbul\0\0'u
Link	LINK-FROM	LINK-TO
.sp
Например:
.sp
.ti +.5i
Link	Europe/Istanbul	Asia/Istanbul
.sp
.fi
Поле
.B LINK-FROM
должно иметь значение поля
.B NAME
из какой-нибудь строки часовых поясов;
поле
.B LINK-TO
используется для задания альтернативного имени этого часового пояса.
.PP
За исключением дополнительных, строки могут располагаться в любом порядке.
.PP
Строки из файла, описывающего високосную секунду, имеют вид:
.nf
.ti +.5i
.ta \w'Leap\0\0'u +\w'YEAR\0\0'u +\w'MONTH\0\0'u +\w'DAY\0\0'u +\w'HH:MM:SS\0\0'u +\w'CORR\0\0'u
.sp
Leap	YEAR	MONTH	DAY	HH:MM:SS	CORR	R/S
.sp
Например:
.ti +.5i
.sp
Leap	1974	Dec	31	23:59:60	+	S
.sp
.fi
Поля
.BR YEAR ,
.BR MONTH ,
.BR DAY ,
и
.B HH:MM:SS
задают время, когда случается високосная секунда.
Поле
.B CORR
должно содержать
.q + ,
если секунда была добавлена
или
.q - ,
если секунда была пропущена.
.\" Нижние строчки комментария не нужны, так как невозможна вставка или
.\" удаление скачка более одной секунды в одно и то же время.
.\" Стандарт языка C неверен в предположении такой возможности.
.\" Смотрите Terry J Quinn, The BIPM и точность измерения времени,
.\" Proc IEEE 79, 7 (July 1991), 894-905.
.\"	или
.\"	.q ++
.\"	если две секунды были добавлены
.\"	или
.\"	.q --
.\"	если две секунды были пропущены.
Поле
.B R/S
должно равняться
.q Stationary
(можно сокращать), если время високосной секунды, заданное другими полями,
должно интерпретироваться как UTC,
или
.q Rolling
(можно сокращать), если время високосной секунды, заданное другими полями,
должно интерпретироваться как местное время.
.SH ЗАМЕЧАНИЕ
Для областей, где имеется более двух типов местного времени, вам может
потребоваться использовать локальное стандартное время в поле
.B AT
самого раннего правила перевода времени, чтобы быть уверенным, что
самый ранний перевод времени записан в выходной файл правильно.
.SH ФАЙЛ
/usr/local/etc/zoneinfo: стандартный каталог, используемый при создании файлов
.SH "СМОТРИ ТАКЖЕ"
newctime(3), tzfile(5), zdump(8)
.SH ПЕРЕВОД
Юрий Козлов <y_kozlov@chat.ru>.
.\" Вычитано и скорректировано by alexm@hsys.msk.ru для проекта
.\" http://alexm.here.ru/manpages-ru/
.\"
.\" man-pages-1.34
.\" Чтв Фев 1 11:45:40 MSK 2001
.\" Linux User Group г.Сергиев Посад spslug.sposad.ru
.\" HomePage http://www.chat.ru/~y_kozlov/

.\" @(#)zic.8	7.19

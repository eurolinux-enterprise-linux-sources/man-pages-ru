.\" This page is in the public domain
.\"
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH ZIC 8 2010\-02\-25 "" "Системное администрирование Linux"
.SH ИМЯ
zic \- компилятор часовых поясов
.SH ОБЗОР
\fBzic\fP [ \fB\-v\fP ] [ \fB\-d\fP \fIкаталог\fP ] [ \fB\-l\fP \fIместное_время\fP ] [ \fB\-p\fP
\fIправила_posix\fP ] [ \fB\-L\fP \fIимя_файла_високосной_секунды\fP ] [ \fB\-s\fP ] [
\fB\-y\fP \fIкоманда\fP ] [ \fIимя_файла\fP \&... ]
.SH ОПИСАНИЕ
.if  t .ds lq ``
.if  t .ds rq ''
.if  n .ds lq \&"\"
.if  n .ds rq \&"\"
.de  q
\\$3\*(lq\\$1\*(rq\\$2
..
\fIZic\fP читает текст из файла(ов), имя которого задано в командной строке и
создаёт файлы с информацией о переводе времени. Если в качестве
\fIимени_файла\fP указан символ \fB\-\fP, то для чтения используется стандартный
ввод.
.PP
Возможные параметры:
.TP 
\fB\-d \fP\fIкаталог\fP
Создавать файлы с информацией для перевода времени в заданном каталоге, а не
в нижеуказанном стандартном каталоге.
.TP 
\fB\-l \fP\fIчасовой_пояс\fP
Использовать заданный часовой пояс в качестве местного времени. В этом
случае \fIzic\fP поступит так, как если входные данные содержали строку
.sp
.ti +.5i
Link	\fIчасовой_пояс\fP		localtime
.TP 
\fB\-p \fP\fIчасовой_пояс\fP
Использовать правила данного часового пояса при обработке соответствующих
переменных окружения, описанных в стандарте POSIX. В этом случае \fIzic\fP
поступит так, как если бы входные данные содержали строку
.sp
.ti +.5i
Link	\fIчасовой_пояс\fP		posixrules
.TP 
\fB\-L \fP\fIимя_файла_високосной_секунды\fP
Прочитать информацию о високосной секунде из файла с заданным именем. Если
этот параметр не используется, то в выходном файле информация о високосной
секунде не появится.
.TP 
\fB\-v\fP
Информировать, если год из файла данных выходит за границы диапазона лет,
значения которых может выдавать функция \fBtime\fP(2).
.TP 
\fB\-s\fP
Ограничить значения времени в выходных файлах рамками значений из входных
файлов, то есть оставить их какими они были \(em знаковыми или
беззнаковыми. Этот параметр можно использовать для создания SVVS\-совместимых
файлов.
.TP 
\fB\-y \fP\fIкоманда\fP
Использовать заданную \fIкоманду\fP вместо \fByearistype\fP, при проверке типа
года (смотрите ниже).
.PP
Входные строки состоят из полей. Поля отделяются друг от друга любым числом
пробельных символов. Начальные и конечные пробелы входных строк
игнорируются. С символа диеза (#), не находящегося в кавычках, начинается
комментарий, заканчивающийся концом строки. Если в поле нужно использовать
символы пробела и диеза, то их нужно заключить в двойные кавычки ("). Любая
пустая строка (после удаления комментариев) игнорируется. Непустые строки
могут быть трёх типов: строки правил, строки поясов и строки ссылок.
.PP
Строка правила имеет вид
.nf
.ti +.5i
.ta \w'Rule\0\0'u +\w'NAME\0\0'u +\w'FROM\0\0'u +\w'1973\0\0'u +\w'TYPE\0\0'u +\w'Apr\0\0'u +\w'lastSun\0\0'u +\w'2:00\0\0'u +\w'SAVE\0\0'u
.sp
Rule	NAME	FROM	TO	TYPE	IN	ON	AT	SAVE	LETTER/S
.sp
Например:
.ti +.5i
.sp
Rule	US	1967	1973	\-	Apr	lastSun	2:00	1:00	D
.sp
.fi
Описание полей, из которых состоит строка правила:
.TP  "\w'LETTER/S'u"
\fBNAME\fP
Определяет (произвольное) имя списка правил, частью которого является данное
правило.
.TP 
\fBFROM\fP
Задаёт первый год, в котором применяется данное правило. Можно задать любое
целое значение года; предполагается использование Григорианского
календаря. Слово \fIminimum\fP (или аббревиатура) означает минимальный год,
который может быть задан целым числом. Слово \fImaximum\fP (или аббревиатура)
означает максимальный год, который может быть задан целым числом. Правила
могут описывать время, которое не представимо на данной машине, такие
времена игнорируются; это делает правила переносимыми между машинами с
различными типами значений времени.
.TP 
\fBTO\fP
Задаёт последний год, в котором применяется данное правило. Вдобавок к
\fIminimum\fP и \fImaximum\fP (описанным выше), может использоваться слово \fIonly\fP
(или аббревиатуру), которое означает повторение значения из поля \fBFROM\fP.
.TP 
\fBTYPE\fP
Задаёт тип года, в котором применяется данное правило. Если \fBTYPE\fP равно
\fB\-\fP, то правило применяется ко всем годам между значениями \fBFROM\fP и \fBTO\fP
включительно. Если \fBTYPE\fP равно чему\-нибудь ещё, то для проверки типа года
\fIzic\fP выполняет команду
.ti +.5i
\fByearistype\fP \fIгод\fP \fIтип\fP
.br
Нулевой код завершения означает, что год имеет указанный тип. Код завершения
1 означает, что год не заданного типа.
.TP 
\fBIN\fP
Название месяца, в котором начинает действовать правило. Название месяца
может быть аббревиатурой.
.TP 
\fBON\fP
Задаёт день, в котором начинает действовать правило. Возможные формы записи:
.nf
.in +.5i
.sp
.ta \w'Sun<=25\0\0'u
5	пятый день месяца
lastSun	последнее воскресенье месяца
lastMon	последний понедельник месяца
Sun>=8	первое воскресенье после восьмого числа включительно
Sun<=25	последнее воскресенье перед 25\-м числом включительно
.fi
.in -.5i
.sp
Названия дней недели могут быть аббревиатурой или писаться
полностью. Заметим, что в поле \fBON\fP не должно быть пробелов.
.TP 
\fBAT\fP
Задаёт время дня, с которого начинает действовать правило. Возможные формы
записи:
.nf
.in +.5i
.sp
.ta \w'1:28:13\0\0'u
2	время в часах
2:00	время в часах и минутах
15:00	24\-часовой формат задания времени (для времени после полудня)
1:28:14	время в часах, минутах и секундах
\-	эквивалентно 0
.fi
.in -.5i
.sp
где 0 часов означает полночь и начало нового дня, а 24 часа означают полночь
и конец дня. Любая из этих форм может заканчиваться символом \fIw\fP, если это
местное "по настенным часам" время,
.q "wall clock"
\fIs\fP, если это локальное "стандартное" время,
.q standard
или \fIu\fP (или \fIg\fP, или \fIz\fP), если это универсальное время; при отсутствии
временного индикатора предполагается, что это местное время.
.TP 
\fBSAVE\fP
Задаёт количество времени, которое нужно добавить к локальному стандартному
времени при начале действия правила. Это поле имеет тот же формат, что и
поле \fBAT\fP, (хотя, конечно, при этом суффиксы \fIw\fP и \fIs\fP не используются).
.TP 
\fBLETTER/S\fP
Задаёт
.q "variable part"
(например,
.q S
или
.q D
в
.q EST
или
.q EDT )
аббревиатуре часового пояса, который используется, когда правило начинает
действовать. Если это поле равно \fB\-\fP, то переменная часть будет пустой.
.PP
Строка часового пояса имеет вид
.sp
.nf
.ti +.5i
.ta \w'Zone\0\0'u +\w'Australia/Adelaide\0\0'u +\w'UTCOFF\0\0'u +\w'RULES/SAVE\0\0'u +\w'FORMAT\0\0'u
Zone	NAME	UTCOFF	RULES/SAVE	FORMAT	[UNTIL]
.sp
Например:
.sp
.ti +.5i
Zone	Australia/Adelaide	9:30	Aus	CST	1971 Oct 31 2:00
.sp
.fi
Описание полей, из которых состоит строка часового пояса:
.TP  "\w'UTCOFF'u"
\fBNAME\fP
Название часового пояса. Это название используется при создании файла с
информацией о переводе времени для этого пояса.
.TP 
\fBUTCOFF\fP
Время, которое нужно добавить к UTC, чтобы получить стандартное время для
этого пояса. Это поле имеет тот же формат, что и поля \fBAT\fP и \fBSAVE\fP
строках правил. Если нужно отнять какое\-то время от UTC, введите знак минуса
в начале поля.
.TP 
\fBRULES/SAVE\fP
Названия правил(а), которые используются в этом часовом поясе, или иначе
говоря, время, которое нужно добавить к локальному стандартному
времени. Если это поле равно \fB\-\fP, то в этом часовом поясе всегда
используется стандартное время.
.TP 
\fBFORMAT\fP
Формат аббревиатуры для данного часового пояса. Пара символов \fB%s\fP задаёт
.q "variable part"
аббревиатуры часового пояса. Косая черта (/) разделяет стандартную
аббревиатуру и аббревиатуру летнего времени.
.TP 
\fBUNTIL\fP
Время, с которого изменяются смещение UTC или правила. Оно задаётся годом,
месяцем, днем и временем дня. Если оно задано, то информация о часовом поясе
формируется из заданного смещения UTC и правила, подпадающего под время
изменения. Месяц, день и время дня имеют тот же формат, что и в колонках
правил IN, ON и AT; последние колонки могут не задаваться, а по умолчанию
для пропущенных колонок действуют самые ранние их значения.
.IP
Далее должна следовать
.q continuation
строка; она имеет тот же формат, что и строка часового пояса, за исключением
того, что в строке пропускается
.q Zone
и название, как если бы дополнительная строка задавала информацию,
начинающуюся со времени, указанном в поле \fBUNTIL\fP в предыдущей строке в
файле, для использования предыдущей строкой. Дополнительные строки могут
содержать поле \fBUNTIL\fP как и строки пояса, показывающее, что следующая
строка тоже является дополнительной.
.PP
Строка ссылки имеет вид
.sp
.nf
.ti +.5i
.ta \w'Link\0\0'u +\w'Europe/Istanbul\0\0'u
Link	LINK\-FROM	LINK\-TO
.sp
Например:
.sp
.ti +.5i
Link	Europe/Istanbul	Asia/Istanbul
.sp
.fi
Поле \fBLINK\-FROM\fP должно иметь значение поля \fBNAME\fP из какой\-нибудь строки
часовых поясов; поле \fBLINK\-TO\fP используется для задания альтернативного
имени этого часового пояса.
.PP
За исключением дополнительных, строки могут располагаться в любом порядке.
.PP
Строки из файла, описывающего високосные секунды, имеют вид:
.nf
.ti +.5i
.ta \w'Leap\0\0'u +\w'YEAR\0\0'u +\w'MONTH\0\0'u +\w'DAY\0\0'u +\w'HH:MM:SS\0\0'u +\w'CORR\0\0'u
.sp
Leap	YEAR	MONTH	DAY	HH:MM:SS	CORR	R/S
.sp
Например:
.ti +.5i
.sp
Leap	1974	Dec	31	23:59:60	+	S
.sp
.fi
Поля \fBYEAR\fP, \fBMONTH\fP, \fBDAY\fP и \fBHH:MM:SS\fP задают время, когда случается
високосная секунда. Поле \fBCORR\fP должно содержать
.q +
, если секунда была добавлена, или
.q -
.\" There's no need to document the following, since it's impossible for more
.\" than one leap second to be inserted or deleted at a time.
.\" The C Standard is in error in suggesting the possibility.
.\" See Terry J Quinn, The BIPM and the accurate measure of time,
.\" Proc IEEE 79, 7 (July 1991), 894-905.
.\"	or
.\"	.q ++
.\"	if two seconds were added
.\"	or
.\"	.q --
.\"	if two seconds were skipped.
если секунда была пропущена. Поле \fBR/S\fP должно равняться
.q Stationary
(в виде аббревиатуры), если время високосной секунды, заданное другими
полями, должно интерпретироваться как UTC, или
.q Rolling
(в виде аббревиатуры), если время високосной секунды, заданное другими
полями, должно интерпретироваться как местное время.
.SH ФАЙЛЫ
/usr/local/etc/zoneinfo	стандартный каталог, используемый при создании
файлов
.SH ЗАМЕЧАНИЯ
Для территорий, где имеется более двух типов местного времени, вам может
потребоваться использовать локальное стандартное время в поле \fBAT\fP самого
раннего правила перевода времени, чтобы быть уверенным, что самый ранний
перевод времени записан в выходной файл правильно.
.SH "СМОТРИТЕ ТАКЖЕ"
\fBtzfile\fP(5), \fBzdump\fP(8)
.\" @(#)zic.8	7.19
